{"ast":null,"code":"// (c) MUsoftware 2022\n'use strict';\n\nimport { FrostError } from \"../common/error\";\nexport class APIResult {\n  constructor(response) {\n    var _response$body$succes, _response$body$code, _response$body, _response$body$sub_co, _response$body2, _response$body$messag, _response$body3, _response$body$data, _response$body4, _response$header;\n\n    this.success = false;\n    this.code = -1;\n    this.subCode = '';\n    this.message = '';\n    this.header = {};\n    this.data = {};\n    if (!response) throw new FrostError('서버에서 받은 응답을 이해하지 못했어요,\\n잠시 후에 다시 시도해주세요.', '서버에서 받은 데이터를 파싱하지 못했습니다.', -1);\n    this.success = (_response$body$succes = response.body.success) !== null && _response$body$succes !== void 0 ? _response$body$succes : false;\n    this.code = parseInt((_response$body$code = response === null || response === void 0 ? void 0 : (_response$body = response.body) === null || _response$body === void 0 ? void 0 : _response$body.code) !== null && _response$body$code !== void 0 ? _response$body$code : -1, 10);\n    this.subCode = (_response$body$sub_co = response === null || response === void 0 ? void 0 : (_response$body2 = response.body) === null || _response$body2 === void 0 ? void 0 : _response$body2.sub_code) !== null && _response$body$sub_co !== void 0 ? _response$body$sub_co : '';\n    this.message = (_response$body$messag = response === null || response === void 0 ? void 0 : (_response$body3 = response.body) === null || _response$body3 === void 0 ? void 0 : _response$body3.message) !== null && _response$body$messag !== void 0 ? _response$body$messag : '';\n    this.data = (_response$body$data = response === null || response === void 0 ? void 0 : (_response$body4 = response.body) === null || _response$body4 === void 0 ? void 0 : _response$body4.data) !== null && _response$body$data !== void 0 ? _response$body$data : {};\n    this.header = (_response$header = response === null || response === void 0 ? void 0 : response.header) !== null && _response$header !== void 0 ? _response$header : {};\n\n    if (!this.success) {\n      if (this.subCode == 'request.body.invalid' || this.subCode == 'request.body.empty') {\n        throw new FrostError('알 수 없는 문제가 발생했어요,\\n잠시 후에 다시 시도해주세요.', '클라이언트가 요청할 데이터를 제대로 보내지 않았어요.', this.code);\n      } else if (this.subCode.startsWith('request.header')) {\n        throw new FrostError('알 수 없는 문제가 발생했어요,\\n잠시 후에 다시 시도해주세요.', '클라이언트가 요청의 말머리를 제대로 보내지 않았어요.', this.code);\n      } else if (this.subCode.startsWith('backend')) {\n        throw new FrostError('서버에 알 수 없는 문제가 발생했어요,\\n잠시 후에 다시 시도해주세요.', '서버가 영 좋지 않은 상황이에요.', this.code);\n      } else if (this.subCode.startsWith('http')) {\n        throw new FrostError('서버에서 무엇을 할지 모르는 요청이에요...', this.subCode, this.code);\n      } else if (this.subCode.startsWith('refresh_token')) {\n        throw new FrostError('로그인 정보가 올바르지 않아요,\\n죄송하지만 다시 로그인 해주세요.', `서버가 ${this.subCode}를 반환했습니다.`, this.code);\n      } else if (this.subCode.startsWith('access_token')) {\n        // Maybe access token's time is not expired, but it's revoked?\n        // We need to retry this request after force token refresh.\n        throw new FrostError('로그인 정보가 올바르지 않아요,\\n죄송하지만 다시 로그인 해주세요.', `AccessToken이 올바르지 않고, 서버가 ${this.subCode}를 반환했습니다.`, this.code, true);\n      } else if (this.subCode === 'user.not_signed_in') {\n        throw new FrostError('로그인이 되어 있지 않아요,\\n로그인 해주세요.', '서버가 \"user.not_signed_in\"를 반환했습니다.', this.code);\n      } else {\n        return this; // throw new FrostError(\n        //   '서버와의 통신에서 문제가 발생했어요,\\n잠시 후 다시 시도해주세요.',\n        //   `서버가 \"${this.subCode === '' ? \"sub_code 없음\" : this.subCode}\"를 반환했습니다.`, this.code);\n      }\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/MUsoftware/Documents/GitHub/mudev_frontend/src/network/api_response.ts"],"names":["FrostError","APIResult","constructor","response","success","code","subCode","message","header","data","body","parseInt","sub_code","startsWith"],"mappings":"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","sourcesContent":["// (c) MUsoftware 2022\r\n'use strict';\r\n\r\nimport { FrostError } from \"../common/error\";\r\n\r\nexport class APIResult {\r\n  success: boolean = false;\r\n  code: number = -1;\r\n  subCode: string = '';\r\n  message: string = '';\r\n  header: Record<string, unknown> = {};\r\n  data: Record<string, unknown> = {};\r\n\r\n  constructor(response: { header: Record<string, unknown>, body: Record<string, unknown> }) {\r\n    if (!response)\r\n      throw new FrostError(\r\n        '서버에서 받은 응답을 이해하지 못했어요,\\n잠시 후에 다시 시도해주세요.',\r\n        '서버에서 받은 데이터를 파싱하지 못했습니다.', -1);\r\n\r\n    this.success = response.body.success ?? false;\r\n    this.code = parseInt((response?.body?.code ?? -1), 10);\r\n    this.subCode = response?.body?.sub_code ?? '';\r\n    this.message = response?.body?.message ?? '';\r\n    this.data = response?.body?.data ?? {};\r\n    this.header = response?.header ?? {};\r\n\r\n    if (!this.success) {\r\n      if (this.subCode == 'request.body.invalid' || this.subCode == 'request.body.empty') {\r\n        throw new FrostError(\r\n          '알 수 없는 문제가 발생했어요,\\n잠시 후에 다시 시도해주세요.',\r\n          '클라이언트가 요청할 데이터를 제대로 보내지 않았어요.', this.code);\r\n      } else if (this.subCode.startsWith('request.header')) {\r\n        throw new FrostError(\r\n          '알 수 없는 문제가 발생했어요,\\n잠시 후에 다시 시도해주세요.',\r\n          '클라이언트가 요청의 말머리를 제대로 보내지 않았어요.', this.code);\r\n      } else if (this.subCode.startsWith('backend')) {\r\n        throw new FrostError(\r\n          '서버에 알 수 없는 문제가 발생했어요,\\n잠시 후에 다시 시도해주세요.',\r\n          '서버가 영 좋지 않은 상황이에요.', this.code);\r\n      } else if (this.subCode.startsWith('http')) {\r\n        throw new FrostError(\r\n          '서버에서 무엇을 할지 모르는 요청이에요...',\r\n          this.subCode, this.code);\r\n      } else if (this.subCode.startsWith('refresh_token')) {\r\n        throw new FrostError(\r\n          '로그인 정보가 올바르지 않아요,\\n죄송하지만 다시 로그인 해주세요.',\r\n          `서버가 ${this.subCode}를 반환했습니다.`, this.code);\r\n      } else if (this.subCode.startsWith('access_token')) {\r\n        // Maybe access token's time is not expired, but it's revoked?\r\n        // We need to retry this request after force token refresh.\r\n        throw new FrostError(\r\n          '로그인 정보가 올바르지 않아요,\\n죄송하지만 다시 로그인 해주세요.',\r\n          `AccessToken이 올바르지 않고, 서버가 ${this.subCode}를 반환했습니다.`,\r\n          this.code, true);\r\n      } else if (this.subCode === 'user.not_signed_in') {\r\n        throw new FrostError(\r\n          '로그인이 되어 있지 않아요,\\n로그인 해주세요.',\r\n          '서버가 \"user.not_signed_in\"를 반환했습니다.', this.code);\r\n      } else {\r\n        return this;\r\n        // throw new FrostError(\r\n        //   '서버와의 통신에서 문제가 발생했어요,\\n잠시 후 다시 시도해주세요.',\r\n        //   `서버가 \"${this.subCode === '' ? \"sub_code 없음\" : this.subCode}\"를 반환했습니다.`, this.code);\r\n      }\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
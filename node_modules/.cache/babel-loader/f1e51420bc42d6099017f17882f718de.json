{"ast":null,"code":"import { Dispatch } from 'redux';\nimport { FrostError } from 'src/common/error';\nimport { APIResult } from 'src/network/api_response';\nimport FrostAPI from '../../../network/api';\nimport { ACCOUNT_FETCHING, SIGNED_IN, SIGNED_OUT } from './action';\nimport { AccountInfo } from './model';\nexport const setForceAccountInfoActionCreator = accountInfo => {\n  return {\n    type: SIGNED_IN,\n    accountInfo: accountInfo\n  };\n};\nexport const setForceSignOutActionCreator = () => {\n  return {\n    type: SIGNED_OUT,\n    accountInfo: new AccountInfo({\n      isSignedIn: false\n    })\n  };\n};\nexport const signInActionCreatorAsync = (idOrEmail, password) => async dispatch => {\n  dispatch({\n    type: ACCOUNT_FETCHING\n  });\n  new FrostAPI().signIn(idOrEmail, password).then(result => dispatch(() => ({\n    type: SIGNED_IN,\n    accountInfo: new AccountInfo({\n      isSignedIn: true,\n      uuid: result.userData.uuid,\n      id: result.userData.id,\n      nick: result.userData.nickname,\n      email: result.userData.email\n    })\n  })), reason => dispatch(() => ({\n    type: SIGNED_OUT,\n    accountInfo: new AccountInfo({\n      isSignedIn: false,\n      frostErrorObj: reason\n    })\n  })));\n};\nexport const signUpActionCreatorAsync = (id, email, nick, password) => async dispatch => {\n  dispatch({\n    type: ACCOUNT_FETCHING\n  });\n  new FrostAPI().signUp(id, email, password, nick).then(result => {\n    console.log(result);\n\n    try {\n      dispatch(() => ({\n        type: SIGNED_IN,\n        accountInfo: new AccountInfo({\n          isSignedIn: true,\n          uuid: result.userData.uuid,\n          id: result.userData.id,\n          nick: result.userData.nickname,\n          email: result.userData.email\n        })\n      }));\n    } catch (e) {\n      throw new FrostError('로그인 중 문제가 발생했어요,\\n10분 후에 다시 시도해주세요!', `Error while parsing APIResult, this must not be shown.\\n${e}`, result);\n    }\n  }).catch(reason => dispatch(() => ({\n    type: SIGNED_OUT,\n    accountInfo: new AccountInfo({\n      isSignedIn: false,\n      frostErrorObj: reason\n    })\n  })));\n};\nexport const signOutActionCreatorAsync = () => async dispatch => {\n  dispatch({\n    type: ACCOUNT_FETCHING\n  });\n  new FrostAPI().signOut().finally(() => dispatch(() => ({\n    type: SIGNED_OUT,\n    accountInfo: new AccountInfo({\n      isSignedIn: false\n    })\n  })));\n};\nexport const refreshAccessTokenActionCreatorAsync = () => async dispatch => {\n  dispatch({\n    type: ACCOUNT_FETCHING\n  });\n  new FrostAPI().refreshAuthentications().then(result => dispatch(() => ({\n    type: SIGNED_IN,\n    accountInfo: new AccountInfo({\n      isSignedIn: true,\n      uuid: result.userData.uuid,\n      id: result.userData.id,\n      nick: result.userData.nickname,\n      email: result.userData.email\n    })\n  })), reason => dispatch(() => ({\n    type: SIGNED_OUT,\n    accountInfo: new AccountInfo({\n      isSignedIn: false,\n      frostErrorObj: reason\n    })\n  })));\n};","map":{"version":3,"sources":["C:/Users/MUsoftware/Desktop/project/MUsoftware/mudev.cc/src/redux/modules/account/action_creator.js"],"names":["Dispatch","FrostError","APIResult","FrostAPI","ACCOUNT_FETCHING","SIGNED_IN","SIGNED_OUT","AccountInfo","setForceAccountInfoActionCreator","accountInfo","type","setForceSignOutActionCreator","isSignedIn","signInActionCreatorAsync","idOrEmail","password","dispatch","signIn","then","result","uuid","userData","id","nick","nickname","email","reason","frostErrorObj","signUpActionCreatorAsync","signUp","console","log","e","catch","signOutActionCreatorAsync","signOut","finally","refreshAccessTokenActionCreatorAsync","refreshAuthentications"],"mappings":"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","sourcesContent":["import { Dispatch } from 'redux';\r\nimport { FrostError } from 'src/common/error';\r\nimport { APIResult } from 'src/network/api_response';\r\nimport FrostAPI from '../../../network/api';\r\n\r\nimport {\r\n    ACCOUNT_FETCHING,\r\n    SIGNED_IN,\r\n    SIGNED_OUT,\r\n} from './action';\r\nimport { AccountInfo } from './model';\r\n\r\nexport const setForceAccountInfoActionCreator = (accountInfo: AccountInfo) => {\r\n    return {\r\n        type: SIGNED_IN,\r\n        accountInfo: accountInfo,\r\n    }\r\n}\r\n\r\nexport const setForceSignOutActionCreator = () => {\r\n    return {\r\n        type: SIGNED_OUT,\r\n        accountInfo: new AccountInfo({ isSignedIn: false }),\r\n    }\r\n}\r\n\r\nexport const signInActionCreatorAsync = (idOrEmail, password) => async dispatch => {\r\n    dispatch({ type: ACCOUNT_FETCHING });\r\n    (new FrostAPI()).signIn(idOrEmail, password).then(\r\n        (result: FrostAPI) => dispatch(() => ({\r\n            type: SIGNED_IN,\r\n            accountInfo: new AccountInfo({\r\n                isSignedIn: true,\r\n                uuid: result.userData.uuid,\r\n                id: result.userData.id,\r\n                nick: result.userData.nickname,\r\n                email: result.userData.email,\r\n            }),\r\n        })),\r\n        (reason: FrostError) => dispatch(() => ({\r\n            type: SIGNED_OUT,\r\n            accountInfo: new AccountInfo({\r\n                isSignedIn: false,\r\n                frostErrorObj: reason,\r\n            }),\r\n        })),\r\n    );\r\n}\r\n\r\nexport const signUpActionCreatorAsync = (id, email, nick, password) => async dispatch => {\r\n    dispatch({ type: ACCOUNT_FETCHING });\r\n    (new FrostAPI())\r\n        .signUp(id, email, password, nick)\r\n        .then((result: FrostAPI | APIResult) => {\r\n            console.log(result);\r\n            try {\r\n                dispatch(() => ({\r\n                    type: SIGNED_IN,\r\n                    accountInfo: new AccountInfo({\r\n                        isSignedIn: true,\r\n                        uuid: result.userData.uuid,\r\n                        id: result.userData.id,\r\n                        nick: result.userData.nickname,\r\n                        email: result.userData.email,\r\n                    }),\r\n                }))\r\n            } catch (e) {\r\n                throw new FrostError(\r\n                    '로그인 중 문제가 발생했어요,\\n10분 후에 다시 시도해주세요!',\r\n                    `Error while parsing APIResult, this must not be shown.\\n${e}`,\r\n                    result\r\n                );\r\n            }\r\n        })\r\n        .catch((reason: FrostError) => dispatch(() => ({\r\n            type: SIGNED_OUT,\r\n            accountInfo: new AccountInfo({\r\n                isSignedIn: false,\r\n                frostErrorObj: reason,\r\n            }),\r\n        })));\r\n}\r\n\r\nexport const signOutActionCreatorAsync = () => async dispatch => {\r\n    dispatch({ type: ACCOUNT_FETCHING });\r\n    (new FrostAPI()).signOut().finally(\r\n        () => dispatch(() => ({\r\n            type: SIGNED_OUT,\r\n            accountInfo: new AccountInfo({ isSignedIn: false }),\r\n        }))\r\n    );\r\n}\r\n\r\nexport const refreshAccessTokenActionCreatorAsync = () => async dispatch => {\r\n    dispatch({ type: ACCOUNT_FETCHING });\r\n    (new FrostAPI()).refreshAuthentications().then(\r\n        (result: FrostAPI) => dispatch(() => ({\r\n            type: SIGNED_IN,\r\n            accountInfo: new AccountInfo({\r\n                isSignedIn: true,\r\n                uuid: result.userData.uuid,\r\n                id: result.userData.id,\r\n                nick: result.userData.nickname,\r\n                email: result.userData.email,\r\n            }),\r\n        })),\r\n        (reason: FrostError) => dispatch(() => ({\r\n            type: SIGNED_OUT,\r\n            accountInfo: new AccountInfo({\r\n                isSignedIn: false,\r\n                frostErrorObj: reason,\r\n            }),\r\n        })),\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
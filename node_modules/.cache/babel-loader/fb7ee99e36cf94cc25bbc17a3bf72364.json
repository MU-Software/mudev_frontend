{"ast":null,"code":"import _objectSpread from\"C:/Users/MUsoftware/Desktop/project/MUsoftware/mudev.cc/.yarn/cache/@babel-runtime-npm-7.12.1-b069f70b16-fb4b4c8f70.zip/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/MUsoftware/Desktop/project/MUsoftware/mudev.cc/.yarn/cache/@babel-runtime-npm-7.12.1-b069f70b16-fb4b4c8f70.zip/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{refreshAccessTokenActionCreatorAsync}from'src/redux/modules/account/action_creator';import Icon from'@mdi/react';import{mdiPlus,mdiCheckBold,mdiDeleteCircle,mdiRefresh}from'@mdi/js';import{OverlayTrigger,Tooltip,Spinner,Button}from'react-bootstrap';import{PHButton}from'src/ui/common/element/muButton';import{PHFormText}from'src/ui/common/element/muFormText';import{ListRow}from'../../common/element/muListRow';import{Divider}from'../../common/element/divider';import'./main.css';import{PlaylistControlModal}from'./element/playlistControlModal';import{PlayCoAPI}from'./playco/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var isNumeric=function isNumeric(val){return /^\\d+$/.test(val);};var PlayCoPlaylistList=function PlayCoPlaylistList(props){var _useState=useState({playlistManualEnterTargetIdTextField:'',playlistManualEnterFailedReason:''}),_useState2=_slicedToArray(_useState,2),playlistListState=_useState2[0],setPlaylistListState=_useState2[1];var navigate=useNavigate();var showPlaylistCreateModalFunc=function showPlaylistCreateModalFunc(){return props.setPlaylistCreateModalShowState(true);};var enterPlaylist=function enterPlaylist(playlistId){if(!playlistId)setPlaylistListState(_objectSpread(_objectSpread({},playlistListState),{},{playlistManualEnterFailedReason:'참여하실 재생목록의 ID를 입력해주세요.'}));props.enterPlaylistFunc(playlistId);};return/*#__PURE__*/_jsx(\"aside\",{className:\"playCoListAside\",children:/*#__PURE__*/_jsxs(\"div\",{children:[props.socketIoConnectionStatusState&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PHFormText,{showOnlyNeeded:true,children:props.socketIoConnectionStatusState}),/*#__PURE__*/_jsx(Divider,{style:{marginLeft:0,marginRight:0,marginTop:'1rem',marginBottom:'1rem',width:'100%'}})]}),/*#__PURE__*/_jsx(\"input\",{title:\"ID of playlist to enter\",placeholder:\"\\uCC38\\uC5EC\\uD560 \\uC7AC\\uC0DD\\uBAA9\\uB85D ID\",className:\"playCoIdToEnterTextField\",disabled:props.isPlaylistFetchingState,type:\"text\",pattern:\"\\\\d*\",value:playlistListState.playlistManualEnterTargetIdTextField,onChange:function onChange(evt){var inputedString=evt.target.value.trim();if(inputedString&&!isNumeric(inputedString))return;setPlaylistListState(_objectSpread(_objectSpread({},playlistListState),{},{playlistManualEnterTargetIdTextField:inputedString,playlistManualEnterFailedReason:''}));}}),/*#__PURE__*/_jsx(PHButton,{variant:\"success\",width:\"100%\",disabled:props.isPlaylistFetchingState,onClick:function onClick(){return enterPlaylist(playlistListState.playlistManualEnterTargetIdTextField);},children:props.isPlaylistFetchingState?/*#__PURE__*/_jsx(_Fragment,{children:\"\\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Icon,{path:mdiCheckBold,size:\"1.1rem\"}),\"\\xA0\\xA0\\uC7AC\\uC0DD\\uBAA9\\uB85D\\uC5D0 \\uCC38\\uC5EC\\uD558\\uAE30\"]})}),/*#__PURE__*/_jsx(PHFormText,{showOnlyNeeded:true,children:playlistListState.playlistManualEnterFailedReason}),/*#__PURE__*/_jsx(Divider,{style:{marginLeft:0,marginRight:0,marginTop:'1rem',marginBottom:'1rem',width:'100%'}}),/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"playCoPlaylistListTitleContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"playCoPlaylistListTitle\",children:\"\\uB0B4 \\uC7AC\\uC0DD\\uBAA9\\uB85D\"}),/*#__PURE__*/_jsx(OverlayTrigger,{placement:\"bottom\",overlay:function overlay(tooltipProps){return/*#__PURE__*/_jsx(Tooltip,_objectSpread(_objectSpread({},tooltipProps),{},{className:\"playCoPlaylistListRefreshTooltip\",children:\"\\uC0C8\\uB85C\\uACE0\\uCE68\"}));},children:/*#__PURE__*/_jsx(Button,{className:\"rounded-circle playCoPlaylistListRefreshButton\",variant:\"primary\",style:{padding:'0.05rem'},disabled:props.isPlaylistFetchingState,onClick:props.refreshPlaylistFunc,children:/*#__PURE__*/_jsx(\"div\",{className:\"playCoPlaylistDetailListRefreshButtonIconContainer\",children:/*#__PURE__*/_jsx(Icon,{path:mdiRefresh,size:\"1.75rem\"})})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"playCoAsideSectionHeaderButtonContainer\",children:[/*#__PURE__*/_jsxs(PHButton,{smaller:true,variant:\"outline-secondary\",style:{color:'var(--color)',border:'1px solid var(--color)'},disabled:props.isPlaylistFetchingState,onClick:showPlaylistCreateModalFunc,children:[/*#__PURE__*/_jsx(Icon,{path:mdiPlus,size:\"1.1rem\"}),\"\\xA0\\xA0\\uC0C8 \\uC7AC\\uC0DD\\uBAA9\\uB85D \\uB9CC\\uB4E4\\uAE30\"]}),/*#__PURE__*/_jsx(PlaylistControlModal,{createMode:true,modalShowState:props.playlistCreateModalShowState,setModalShowState:props.setPlaylistCreateModalShowState})]}),props.playlistList&&props.playlistList.length!=0?props.playlistList.map(function(value,index,array){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(ListRow,{className:\"playCoListItem\",style:_objectSpread({marginLeft:'1rem',marginRight:'1rem',border:'none',borderRadius:'none'},value.blocked_at?{textDecoration:'line-through red',textDecorationThickness:'0.3rem'}:{}),itemWidth:[90,10],onClick:function onClick(){return enterPlaylist(value.uuid);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"playCoListItemTextContainer\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"playCoListTitleContainer\",children:value.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"playCoListAdditionalInfoContainer\",children:[/*#__PURE__*/_jsx(\"div\",{children:value.blocked_at?value.why_blocked:value.item_count?\"\".concat(value.item_count,\"\\uAC1C\"):'비어있는 재생목록'}),/*#__PURE__*/_jsx(\"div\",{children:value.participant_count?\"\\uC801\\uC5B4\\uB3C4 \".concat(value.participant_count,\"\\uBA85\\uC774 \\uB4E3\\uB294 \\uC911\\uC774\\uC5D0\\uC694!\"):''})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{variant:\"link\",style:{color:'var(--color)'},onClick:function onClick(e){e.stopPropagation();props.deletePlaylistFunc(value.uuid);},children:/*#__PURE__*/_jsx(Icon,{path:mdiDeleteCircle,size:\"1.75rem\"})})})]}),index===array.length-1?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(Divider,{})]},\"playco-playlist-main-listitem-\".concat(value.uuid));}):props.isPlaylistFetchingState?/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\uC7AC\\uC0DD\\uBAA9\\uB85D\\uC744 \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC774\\uC5D0\\uC694,\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\uB9CC\\uB4DC\\uC2E0 \\uC7AC\\uC0DD\\uBAA9\\uB85D\\uC774 \\uC5C6\\uC5B4\\uC694,\",/*#__PURE__*/_jsx(\"br\",{}),\"\\\"\\uC0C8 \\uC7AC\\uC0DD\\uBAA9\\uB85D \\uB9CC\\uB4E4\\uAE30\\\" \\uBC84\\uD2BC\\uC744 \\uB20C\\uB7EC\\uC8FC\\uC138\\uC694!\"]})]})});};var PlayCoRequireSignedIn=function PlayCoRequireSignedIn(){var navigate=useNavigate();return/*#__PURE__*/_jsxs(\"aside\",{style:{width:'calc(var(--width-card) * 1.25)'},children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"PlayCo\\uC758 \\uD2B9\\uC815 \\uAE30\\uB2A5\\uC740 \\uACC4\\uC815\\uC774 \\uD544\\uC694\\uD574\\uC694,\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uC774 \\uAE30\\uB2A5\\uC744 \\uC704\\uD574 \\uB85C\\uADF8\\uC778\\uC744 \\uD574 \\uC8FC\\uC138\\uC694.\"]})}),/*#__PURE__*/_jsx(PHButton,{onClick:function onClick(){return navigate('/account/signin');},variant:\"primary\",size:\"medium\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Divider,{style:{margin:'unset',marginLeft:'0',marginRight:'0',marginTop:'1.25rem',marginBottom:'1.25rem',width:'100%'}}),/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD604\\uC7AC \\uB85C\\uADF8\\uC778 \\uC5C6\\uC774 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uC900\\uBE44 \\uC911\\uC774\\uC5D0\\uC694,\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uC870\\uAE08\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694!\"]})})]});};export var PlaycoMain=function PlaycoMain(props){var _accountInfo$isSigned,_accountInfo$isFetchi;var accountInfo=useSelector(function(state){return state.accountReducer;});var dispatch=useDispatch();var navigate=useNavigate();var _useState3=useState({playlistCreateModalShowState:false,playlists:[],playlistFetchFailedReason:'',didAccountInfoDispatched:false,isSignedIn:(_accountInfo$isSigned=accountInfo===null||accountInfo===void 0?void 0:accountInfo.isSignedIn)!==null&&_accountInfo$isSigned!==void 0?_accountInfo$isSigned:false,isAccountFetching:(_accountInfo$isFetchi=accountInfo===null||accountInfo===void 0?void 0:accountInfo.isFetching)!==null&&_accountInfo$isFetchi!==void 0?_accountInfo$isFetchi:false,isPlaylistFetching:false,socketIoConnectionStatus:''}),_useState4=_slicedToArray(_useState3,2),playCoMainState=_useState4[0],setPlayCoMainState=_useState4[1];var fetchAndUpdatePlaylistListState=function fetchAndUpdatePlaylistListState(){if(playCoMainState.isPlaylistFetching)// is currently fetching\nreturn;setPlayCoMainState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isPlaylistFetching:true});});PlayCoAPI.getAllPlaylists().then(function(result){return setPlayCoMainState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isPlaylistFetching:false,playlists:result,playlistFetchFailedReason:''});});},function(reason){return setPlayCoMainState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isPlaylistFetching:false,playlists:[],playlistFetchFailedReason:reason.message});});});};var deletePlaylist=function deletePlaylist(playlistId){setPlayCoMainState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{playlists:[],isPlaylistFetching:true});});PlayCoAPI.deletePlaylist(playlistId).then(function(result){return fetchAndUpdatePlaylistListState();},function(reason){return setPlayCoMainState(_objectSpread(_objectSpread({},playCoMainState),{},{playlistFetchFailedReason:reason.message}));});};var enterPlaylist=function enterPlaylist(playlistId){if(!isNumeric(playlistId))return;navigate(\"/playco/\".concat(playlistId));};var setPlaylistCreateModalState=function setPlaylistCreateModalState(newState){setPlayCoMainState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{playlistCreateModalShowState:newState});});if(!newState){// We are closing modal now.\nfetchAndUpdatePlaylistListState();}};useEffect(function(){dispatch(refreshAccessTokenActionCreatorAsync());},[]);useEffect(function(){setPlayCoMainState(function(prevState){var _accountInfo$isSigned2,_accountInfo$isFetchi2;return _objectSpread(_objectSpread({},prevState),{},{isSignedIn:(_accountInfo$isSigned2=accountInfo===null||accountInfo===void 0?void 0:accountInfo.isSignedIn)!==null&&_accountInfo$isSigned2!==void 0?_accountInfo$isSigned2:false,isAccountFetching:(_accountInfo$isFetchi2=accountInfo===null||accountInfo===void 0?void 0:accountInfo.isFetching)!==null&&_accountInfo$isFetchi2!==void 0?_accountInfo$isFetchi2:false,didAccountInfoDispatched:true});});if(playCoMainState.didAccountInfoDispatched&&accountInfo&&!accountInfo.isFetching&&accountInfo.isSignedIn){fetchAndUpdatePlaylistListState();// Initialize SocketIO-client if it's not initialized.\n// const playCoSocketIo = new PlayCoSocketIOHandler();\n// playCoSocketIo.connect();\nreturn function(){// This will be called when this component unmounts.\n// console.log('UNMOUNTED!!!');\n};}},[accountInfo]);var needToShowSpinner=playCoMainState.isAccountFetching;var playCoBody=needToShowSpinner?/*#__PURE__*/_jsx(Spinner,{animation:\"border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"\\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC774\\uC5D0\\uC694...\"})}):!playCoMainState.isSignedIn?/*#__PURE__*/_jsx(PlayCoRequireSignedIn,{}):/*#__PURE__*/_jsx(PlayCoPlaylistList,{playlistList:playCoMainState.playlists,isPlaylistFetchingState:playCoMainState.isPlaylistFetching,playlistCreateModalShowState:playCoMainState.playlistCreateModalShowState,socketIoConnectionStatusState:playCoMainState.socketIoConnectionStatus,refreshPlaylistFunc:fetchAndUpdatePlaylistListState,deletePlaylistFunc:deletePlaylist,enterPlaylistFunc:enterPlaylist,setPlaylistCreateModalShowState:setPlaylistCreateModalState});return/*#__PURE__*/_jsxs(\"section\",{className:\"playCoMain\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"PlayCO\",/*#__PURE__*/_jsx(\"sup\",{className:\"playCoTitleHeaderSup\",children:\"Alpha\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD50C\\uB808\\uC774\\uB9AC\\uC2A4\\uD2B8\\uB97C, \\uBA40\\uB9AC\\uC11C, \\uB2E4 \\uAC19\\uC774\"})]}),playCoBody]});};","map":{"version":3,"sources":["C:/Users/MUsoftware/Desktop/project/MUsoftware/mudev.cc/src/ui/page/playco/main.tsx"],"names":["React","useState","useEffect","useNavigate","useSelector","useDispatch","refreshAccessTokenActionCreatorAsync","Icon","mdiPlus","mdiCheckBold","mdiDeleteCircle","mdiRefresh","OverlayTrigger","Tooltip","Spinner","Button","PHButton","PHFormText","ListRow","Divider","PlaylistControlModal","PlayCoAPI","isNumeric","val","test","PlayCoPlaylistList","props","playlistManualEnterTargetIdTextField","playlistManualEnterFailedReason","playlistListState","setPlaylistListState","navigate","showPlaylistCreateModalFunc","setPlaylistCreateModalShowState","enterPlaylist","playlistId","enterPlaylistFunc","socketIoConnectionStatusState","marginLeft","marginRight","marginTop","marginBottom","width","isPlaylistFetchingState","evt","inputedString","target","value","trim","tooltipProps","padding","refreshPlaylistFunc","color","border","playlistCreateModalShowState","playlistList","length","map","index","array","borderRadius","blocked_at","textDecoration","textDecorationThickness","uuid","name","why_blocked","item_count","participant_count","e","stopPropagation","deletePlaylistFunc","PlayCoRequireSignedIn","margin","PlaycoMain","accountInfo","state","accountReducer","dispatch","playlists","playlistFetchFailedReason","didAccountInfoDispatched","isSignedIn","isAccountFetching","isFetching","isPlaylistFetching","socketIoConnectionStatus","playCoMainState","setPlayCoMainState","fetchAndUpdatePlaylistListState","prevState","getAllPlaylists","then","result","reason","message","deletePlaylist","setPlaylistCreateModalState","newState","needToShowSpinner","playCoBody"],"mappings":"mZAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,oCAAT,KAAqD,0CAArD,CAGA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,OAASC,OAAT,CAAkBC,YAAlB,CAAgCC,eAAhC,CAAiDC,UAAjD,KAAmE,SAAnE,CACA,OAASC,cAAT,CAAyBC,OAAzB,CAAkCC,OAAlC,CAA2CC,MAA3C,KAAyD,iBAAzD,CAEA,OAASC,QAAT,KAAyB,gCAAzB,CACA,OAASC,UAAT,KAA2B,kCAA3B,CACA,OAASC,OAAT,KAAwB,gCAAxB,CACA,OAASC,OAAT,KAAwB,8BAAxB,CAEA,MAAO,YAAP,CAGA,OAASC,oBAAT,KAAqC,gCAArC,CACA,OAASC,SAAT,KAA0B,cAA1B,C,6IAGA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,GAAD,QAAU,SAAQC,IAAR,CAAaD,GAAb,CAAV,EAAlB,CAEA,GAAME,CAAAA,kBAA4B,CAAG,QAA/BA,CAAAA,kBAA+B,CAACC,KAAD,CAS/B,eAC8CzB,QAAQ,CAAC,CACzD0B,oCAAoC,CAAE,EADmB,CAEzDC,+BAA+B,CAAE,EAFwB,CAAD,CADtD,wCACGC,iBADH,eACsBC,oBADtB,eAKJ,GAAMC,CAAAA,QAAQ,CAAG5B,WAAW,EAA5B,CACA,GAAM6B,CAAAA,2BAA2B,CAAG,QAA9BA,CAAAA,2BAA8B,SAAMN,CAAAA,KAAK,CAACO,+BAAN,CAAsC,IAAtC,CAAN,EAApC,CACA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,UAAD,CAAwB,CAC5C,GAAI,CAACA,UAAL,CACEL,oBAAoB,gCACfD,iBADe,MAElBD,+BAA+B,CAAE,wBAFf,GAApB,CAKFF,KAAK,CAACU,iBAAN,CAAwBD,UAAxB,EACD,CARD,CAUA,mBAAO,cAAO,SAAS,CAAC,iBAAjB,uBACL,uBAEIT,KAAK,CAACW,6BAAN,eAAuC,wCACrC,KAAC,UAAD,EAAY,cAAc,KAA1B,UAA4BX,KAAK,CAACW,6BAAlC,EADqC,cAErC,KAAC,OAAD,EACE,KAAK,CAAE,CACLC,UAAU,CAAE,CADP,CAELC,WAAW,CAAE,CAFR,CAGLC,SAAS,CAAE,MAHN,CAILC,YAAY,CAAE,MAJT,CAKLC,KAAK,CAAE,MALF,CADT,EAFqC,GAF3C,cAeE,cACE,KAAK,CAAC,yBADR,CAEE,WAAW,CAAC,gDAFd,CAGE,SAAS,CAAC,0BAHZ,CAIE,QAAQ,CAAEhB,KAAK,CAACiB,uBAJlB,CAKE,IAAI,CAAC,MALP,CAME,OAAO,CAAC,MANV,CAOE,KAAK,CAAEd,iBAAiB,CAACF,oCAP3B,CAQE,QAAQ,CAAE,kBAACiB,GAAD,CAAS,CACjB,GAAMC,CAAAA,aAAa,CAAGD,GAAG,CAACE,MAAJ,CAAWC,KAAX,CAAiBC,IAAjB,EAAtB,CACA,GAAIH,aAAa,EAAI,CAACvB,SAAS,CAACuB,aAAD,CAA/B,CACE,OAEFf,oBAAoB,gCACfD,iBADe,MAElBF,oCAAoC,CAAEkB,aAFpB,CAGlBjB,+BAA+B,CAAE,EAHf,GAApB,CAKD,CAlBH,EAfF,cAkCE,KAAC,QAAD,EACE,OAAO,CAAC,SADV,CAEE,KAAK,CAAC,MAFR,CAGE,QAAQ,CAAEF,KAAK,CAACiB,uBAHlB,CAIE,OAAO,CAAE,yBAAMT,CAAAA,aAAa,CAACL,iBAAiB,CAACF,oCAAnB,CAAnB,EAJX,UAMKD,KAAK,CAACiB,uBAAP,cACI,uFADJ,cAEI,wCAAE,KAAC,IAAD,EAAM,IAAI,CAAElC,YAAZ,CAA0B,IAAI,CAAC,QAA/B,EAAF,qEARR,EAlCF,cA6CE,KAAC,UAAD,EAAY,cAAc,KAA1B,UAA4BoB,iBAAiB,CAACD,+BAA9C,EA7CF,cA8CE,KAAC,OAAD,EACE,KAAK,CAAE,CACLU,UAAU,CAAE,CADP,CAELC,WAAW,CAAE,CAFR,CAGLC,SAAS,CAAE,MAHN,CAILC,YAAY,CAAE,MAJT,CAKLC,KAAK,CAAE,MALF,CADT,EA9CF,cAuDE,qCACE,YAAI,SAAS,CAAC,kCAAd,wBACE,YAAK,SAAS,CAAC,yBAAf,6CADF,cAIE,KAAC,cAAD,EACE,SAAS,CAAC,QADZ,CAEE,OAAO,CAAE,iBAACO,YAAD,qBAAkB,KAAC,OAAD,gCAAaA,YAAb,MAA2B,SAAS,CAAC,kCAArC,uCAAlB,EAFX,uBAGE,KAAC,MAAD,EACE,SAAS,CAAC,gDADZ,CAEE,OAAO,CAAC,SAFV,CAGE,KAAK,CAAE,CAAEC,OAAO,CAAE,SAAX,CAHT,CAIE,QAAQ,CAAExB,KAAK,CAACiB,uBAJlB,CAKE,OAAO,CAAEjB,KAAK,CAACyB,mBALjB,uBAME,YAAK,SAAS,CAAC,oDAAf,uBACE,KAAC,IAAD,EAAM,IAAI,CAAExC,UAAZ,CAAwB,IAAI,CAAC,SAA7B,EADF,EANF,EAHF,EAJF,GADF,EAvDF,cA4EE,aAAK,SAAS,CAAC,yCAAf,wBACE,MAAC,QAAD,EACE,OAAO,KADT,CAEE,OAAO,CAAC,mBAFV,CAGE,KAAK,CAAE,CACLyC,KAAK,CAAE,cADF,CAELC,MAAM,CAAE,wBAFH,CAHT,CAOE,QAAQ,CAAE3B,KAAK,CAACiB,uBAPlB,CAQE,OAAO,CAAEX,2BARX,wBASE,KAAC,IAAD,EAAM,IAAI,CAAExB,OAAZ,CAAqB,IAAI,CAAC,QAA1B,EATF,gEADF,cAaE,KAAC,oBAAD,EACE,UAAU,KADZ,CAEE,cAAc,CAAEkB,KAAK,CAAC4B,4BAFxB,CAGE,iBAAiB,CAAE5B,KAAK,CAACO,+BAH3B,EAbF,GA5EF,CA+FKP,KAAK,CAAC6B,YAAN,EAAsB7B,KAAK,CAAC6B,YAAN,CAAmBC,MAAnB,EAA6B,CAApD,CACI9B,KAAK,CAAC6B,YAAN,CAAmBE,GAAnB,CAAuB,SAACV,KAAD,CAAQW,KAAR,CAAeC,KAAf,qBAAyB,oCAChD,MAAC,OAAD,EACE,SAAS,CAAC,gBADZ,CAEE,KAAK,gBACHrB,UAAU,CAAE,MADT,CAEHC,WAAW,CAAE,MAFV,CAGHc,MAAM,CAAE,MAHL,CAIHO,YAAY,CAAE,MAJX,EAKEb,KAAK,CAACc,UAAP,CAAqB,CACvBC,cAAc,CAAE,kBADO,CAEvBC,uBAAuB,CAAE,QAFF,CAArB,CAGA,EARD,CAFP,CAYE,SAAS,CAAE,CAAC,EAAD,CAAK,EAAL,CAZb,CAaE,OAAO,CAAE,yBAAM7B,CAAAA,aAAa,CAACa,KAAK,CAACiB,IAAP,CAAnB,EAbX,wBAcE,aAAK,SAAS,CAAC,6BAAf,wBACE,WAAI,SAAS,CAAC,0BAAd,UAA0CjB,KAAK,CAACkB,IAAhD,EADF,cAEE,aAAK,SAAS,CAAC,mCAAf,wBACE,qBACGlB,KAAK,CAACc,UAAP,CACId,KAAK,CAACmB,WADV,CAEKnB,KAAK,CAACoB,UAAP,WACKpB,KAAK,CAACoB,UADX,WAEE,WALR,EADF,cAQE,qBACGpB,KAAK,CAACqB,iBAAP,8BACWrB,KAAK,CAACqB,iBADjB,wDACkD,EAFpD,EARF,GAFF,GAdF,cA8BE,kCACE,KAAC,MAAD,EACE,OAAO,CAAC,MADV,CAEE,KAAK,CAAE,CAAEhB,KAAK,CAAE,cAAT,CAFT,CAGE,OAAO,CAAE,iBAACiB,CAAD,CAAO,CACdA,CAAC,CAACC,eAAF,GACA5C,KAAK,CAAC6C,kBAAN,CAAyBxB,KAAK,CAACiB,IAA/B,EACD,CANH,uBAOE,KAAC,IAAD,EAAM,IAAI,CAAEtD,eAAZ,CAA6B,IAAI,CAAC,SAAlC,EAPF,EADF,EA9BF,GADgD,CA2C9CgD,KAAK,GAAMC,KAAK,CAACH,MAAN,CAAe,CAA3B,cAAiC,kBAAjC,cAAyC,KAAC,OAAD,IA3CM,2CAA2CT,KAAK,CAACiB,IAAjD,EAAzB,EAAvB,CADJ,CA8CKtC,KAAK,CAACiB,uBAAP,cACE,4HAAkB,aAAlB,gEADF,cAEE,gHACc,aADd,+GA/IV,GADK,EAAP,CAuJD,CAjLD,CAmLA,GAAM6B,CAAAA,qBAA+B,CAAG,QAAlCA,CAAAA,qBAAkC,EAAM,CAC5C,GAAMzC,CAAAA,QAAQ,CAAG5B,WAAW,EAA5B,CACA,mBAAO,eAAO,KAAK,CAAE,CAAEuC,KAAK,CAAE,gCAAT,CAAd,wBACL,qCACE,8HAC0B,aAD1B,gGADF,EADK,cAOL,KAAC,QAAD,EACE,OAAO,CAAE,yBAAMX,CAAAA,QAAQ,CAAC,iBAAD,CAAd,EADX,CAEE,OAAO,CAAC,SAFV,CAGE,IAAI,CAAC,QAHP,gCAPK,cAaL,KAAC,OAAD,EAAS,KAAK,CAAE,CAAE0C,MAAM,CAAE,OAAV,CAAmBnC,UAAU,CAAE,GAA/B,CAAoCC,WAAW,CAAE,GAAjD,CAAsDC,SAAS,CAAE,SAAjE,CAA4EC,YAAY,CAAE,SAA1F,CAAqGC,KAAK,CAAE,MAA5G,CAAhB,EAbK,cAyBL,qCACE,qKAC8B,aAD9B,8DADF,EAzBK,GAAP,CAgCD,CAlCD,CAoCA,MAAO,IAAMgC,CAAAA,UAAoB,CAAG,QAAvBA,CAAAA,UAAuB,CAAChD,KAAD,CAAW,iDAC7C,GAAMiD,CAAAA,WAAwB,CAAGvE,WAAW,CAAC,SAAAwE,KAAK,QAAIA,CAAAA,KAAK,CAACC,cAAV,EAAN,CAA5C,CACA,GAAMC,CAAAA,QAAQ,CAAGzE,WAAW,EAA5B,CACA,GAAM0B,CAAAA,QAAQ,CAAG5B,WAAW,EAA5B,CAH6C,eAICF,QAAQ,CAAC,CACrDqD,4BAA4B,CAAE,KADuB,CAGrDyB,SAAS,CAAE,EAH0C,CAIrDC,yBAAyB,CAAE,EAJ0B,CAKrDC,wBAAwB,CAAE,KAL2B,CAMrDC,UAAU,wBAAEP,WAAF,SAAEA,WAAF,iBAAEA,WAAW,CAAEO,UAAf,+DAA6B,KANc,CAOrDC,iBAAiB,wBAAER,WAAF,SAAEA,WAAF,iBAAEA,WAAW,CAAES,UAAf,+DAA6B,KAPO,CAQrDC,kBAAkB,CAAE,KARiC,CASrDC,wBAAwB,CAAE,EAT2B,CAAD,CAJT,yCAItCC,eAJsC,eAIrBC,kBAJqB,eAe7C,GAAMC,CAAAA,+BAA+B,CAAG,QAAlCA,CAAAA,+BAAkC,EAAM,CAC5C,GAAIF,eAAe,CAACF,kBAApB,CAAwC;AACtC,OAEFG,kBAAkB,CAAC,SAACE,SAAD,wCACdA,SADc,MAEjBL,kBAAkB,CAAE,IAFH,IAAD,CAAlB,CAIAhE,SAAS,CAACsE,eAAV,GAA4BC,IAA5B,CACE,SAACC,MAAD,QAAYL,CAAAA,kBAAkB,CAAC,SAACE,SAAD,wCAC1BA,SAD0B,MAE7BL,kBAAkB,CAAE,KAFS,CAG7BN,SAAS,CAAEc,MAHkB,CAI7Bb,yBAAyB,CAAE,EAJE,IAAD,CAA9B,EADF,CAOE,SAACc,MAAD,QAAwBN,CAAAA,kBAAkB,CAAC,SAACE,SAAD,wCACtCA,SADsC,MAEzCL,kBAAkB,CAAE,KAFqB,CAGzCN,SAAS,CAAE,EAH8B,CAIzCC,yBAAyB,CAAEc,MAAM,CAACC,OAJO,IAAD,CAA1C,EAPF,EAcD,CAtBD,CAuBA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAC7D,UAAD,CAAgB,CACrCqD,kBAAkB,CAAC,SAACE,SAAD,wCACdA,SADc,MAEjBX,SAAS,CAAE,EAFM,CAGjBM,kBAAkB,CAAE,IAHH,IAAD,CAAlB,CAMAhE,SAAS,CAAC2E,cAAV,CAAyB7D,UAAzB,EAAqCyD,IAArC,CACE,SAACC,MAAD,QAAYJ,CAAAA,+BAA+B,EAA3C,EADF,CAEE,SAACK,MAAD,QAAwBN,CAAAA,kBAAkB,gCACrCD,eADqC,MAExCP,yBAAyB,CAAEc,MAAM,CAACC,OAFM,GAA1C,EAFF,EAOD,CAdD,CAeA,GAAM7D,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,UAAD,CAAgB,CACpC,GAAI,CAACb,SAAS,CAACa,UAAD,CAAd,CACE,OAEFJ,QAAQ,mBAAYI,UAAZ,EAAR,CACD,CALD,CAOA,GAAM8D,CAAAA,2BAA2B,CAAG,QAA9BA,CAAAA,2BAA8B,CAACC,QAAD,CAAc,CAChDV,kBAAkB,CAAC,SAACE,SAAD,wCACdA,SADc,MAEjBpC,4BAA4B,CAAE4C,QAFb,IAAD,CAAlB,CAKA,GAAI,CAACA,QAAL,CAAe,CACb;AACAT,+BAA+B,GAChC,CACF,CAVD,CAYAvF,SAAS,CAAC,UAAM,CACd4E,QAAQ,CAACxE,oCAAoC,EAArC,CAAR,CACD,CAFQ,CAEN,EAFM,CAAT,CAGAJ,SAAS,CAAC,UAAM,CACdsF,kBAAkB,CAAC,SAACE,SAAD,0FACdA,SADc,MAEjBR,UAAU,yBAAEP,WAAF,SAAEA,WAAF,iBAAEA,WAAW,CAAEO,UAAf,iEAA6B,KAFtB,CAGjBC,iBAAiB,yBAAER,WAAF,SAAEA,WAAF,iBAAEA,WAAW,CAAES,UAAf,iEAA6B,KAH7B,CAIjBH,wBAAwB,CAAE,IAJT,IAAD,CAAlB,CAMA,GAAIM,eAAe,CAACN,wBAAhB,EAA4CN,WAA5C,EAA2D,CAACA,WAAW,CAACS,UAAxE,EAAsFT,WAAW,CAACO,UAAtG,CAAkH,CAChHO,+BAA+B,GAE/B;AACA;AACA;AAEA,MAAO,WAAM,CACX;AACA;AACD,CAHD,CAID,CACF,CAnBQ,CAmBN,CAACd,WAAD,CAnBM,CAAT,CAqBA,GAAMwB,CAAAA,iBAAiB,CAAGZ,eAAe,CAACJ,iBAA1C,CACA,GAAMiB,CAAAA,UAAU,CAAGD,iBAAiB,cAChC,KAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,IAAI,CAAC,QAAjC,uBACA,aAAM,SAAS,CAAC,iBAAhB,kEADA,EADgC,CAIhC,CAACZ,eAAe,CAACL,UAAjB,cACE,KAAC,qBAAD,IADF,cAEE,KAAC,kBAAD,EACA,YAAY,CAAEK,eAAe,CAACR,SAD9B,CAEA,uBAAuB,CAAEQ,eAAe,CAACF,kBAFzC,CAGA,4BAA4B,CAAEE,eAAe,CAACjC,4BAH9C,CAIA,6BAA6B,CAAEiC,eAAe,CAACD,wBAJ/C,CAKA,mBAAmB,CAAEG,+BALrB,CAMA,kBAAkB,CAAEO,cANpB,CAOA,iBAAiB,CAAE9D,aAPnB,CAQA,+BAA+B,CAAE+D,2BARjC,EANN,CAgBA,mBAAO,iBAAS,SAAS,CAAC,YAAnB,wBACL,uCACE,4CAAU,YAAK,SAAS,CAAC,sBAAf,mBAAV,GADF,cAEE,0GAFF,GADK,CAKJG,UALI,GAAP,CAOD,CAxHM","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { refreshAccessTokenActionCreatorAsync } from 'src/redux/modules/account/action_creator';\r\nimport { AccountInfo } from 'src/redux/modules/account/model';\r\n\r\nimport Icon from '@mdi/react';\r\nimport { mdiPlus, mdiCheckBold, mdiDeleteCircle, mdiRefresh } from '@mdi/js';\r\nimport { OverlayTrigger, Tooltip, Spinner, Button } from 'react-bootstrap';\r\n\r\nimport { PHButton } from 'src/ui/common/element/muButton';\r\nimport { PHFormText } from 'src/ui/common/element/muFormText';\r\nimport { ListRow } from '../../common/element/muListRow';\r\nimport { Divider } from '../../common/element/divider';\r\n\r\nimport './main.css';\r\n\r\nimport { PlaylistListener, PlaylistItem, Playlist } from './playco/model';\r\nimport { PlaylistControlModal } from './element/playlistControlModal';\r\nimport { PlayCoAPI } from './playco/api';\r\nimport { PlayCoSocketIOHandler } from './playco/sio';\r\n\r\nconst isNumeric = (val) => (/^\\d+$/.test(val));\r\n\r\nconst PlayCoPlaylistList: React.FC = (props: {\r\n  playlistList: Playlist[],\r\n  isPlaylistFetchingState: boolean,\r\n  playlistCreateModalShowState: boolean,\r\n  socketIoConnectionStatusState: string,\r\n  deletePlaylistFunc: (number) => void,\r\n  refreshPlaylistFunc: () => void,\r\n  enterPlaylistFunc: (number) => void,\r\n  setPlaylistCreateModalShowState: (boolean) => void,\r\n}) => {\r\n  const [playlistListState, setPlaylistListState] = useState({\r\n    playlistManualEnterTargetIdTextField: '',\r\n    playlistManualEnterFailedReason: '',\r\n  });\r\n  const navigate = useNavigate();\r\n  const showPlaylistCreateModalFunc = () => props.setPlaylistCreateModalShowState(true);\r\n  const enterPlaylist = (playlistId: number) => {\r\n    if (!playlistId)\r\n      setPlaylistListState({\r\n        ...playlistListState,\r\n        playlistManualEnterFailedReason: '참여하실 재생목록의 ID를 입력해주세요.',\r\n      });\r\n\r\n    props.enterPlaylistFunc(playlistId);\r\n  };\r\n\r\n  return <aside className='playCoListAside'>\r\n    <div>\r\n      {\r\n        props.socketIoConnectionStatusState && <>\r\n          <PHFormText showOnlyNeeded>{props.socketIoConnectionStatusState}</PHFormText>\r\n          <Divider\r\n            style={{\r\n              marginLeft: 0,\r\n              marginRight: 0,\r\n              marginTop: '1rem',\r\n              marginBottom: '1rem',\r\n              width: '100%',\r\n            }} />\r\n        </>\r\n      }\r\n\r\n      <input\r\n        title='ID of playlist to enter'\r\n        placeholder='참여할 재생목록 ID'\r\n        className='playCoIdToEnterTextField'\r\n        disabled={props.isPlaylistFetchingState}\r\n        type='text'\r\n        pattern='\\d*'\r\n        value={playlistListState.playlistManualEnterTargetIdTextField}\r\n        onChange={(evt) => {\r\n          const inputedString = evt.target.value.trim();\r\n          if (inputedString && !isNumeric(inputedString))\r\n            return;\r\n\r\n          setPlaylistListState({\r\n            ...playlistListState,\r\n            playlistManualEnterTargetIdTextField: inputedString,\r\n            playlistManualEnterFailedReason: '',\r\n          });\r\n        }} ></input>\r\n      <PHButton\r\n        variant='success'\r\n        width='100%'\r\n        disabled={props.isPlaylistFetchingState}\r\n        onClick={() => enterPlaylist(playlistListState.playlistManualEnterTargetIdTextField)} >\r\n        {\r\n          (props.isPlaylistFetchingState)\r\n            ? <>잠시만 기다려주세요...</>\r\n            : <><Icon path={mdiCheckBold} size='1.1rem' />&nbsp;&nbsp;재생목록에 참여하기</>\r\n        }\r\n      </PHButton>\r\n      <PHFormText showOnlyNeeded>{playlistListState.playlistManualEnterFailedReason}</PHFormText>\r\n      <Divider\r\n        style={{\r\n          marginLeft: 0,\r\n          marginRight: 0,\r\n          marginTop: '1rem',\r\n          marginBottom: '1rem',\r\n          width: '100%',\r\n        }} />\r\n\r\n      <header>\r\n        <h5 className='playCoPlaylistListTitleContainer'>\r\n          <div className='playCoPlaylistListTitle'>\r\n            내 재생목록\r\n          </div>\r\n          <OverlayTrigger\r\n            placement='bottom'\r\n            overlay={(tooltipProps) => <Tooltip {...tooltipProps} className='playCoPlaylistListRefreshTooltip'>새로고침</Tooltip>} >\r\n            <Button\r\n              className='rounded-circle playCoPlaylistListRefreshButton'\r\n              variant='primary'\r\n              style={{ padding: '0.05rem' }}\r\n              disabled={props.isPlaylistFetchingState}\r\n              onClick={props.refreshPlaylistFunc} >\r\n              <div className='playCoPlaylistDetailListRefreshButtonIconContainer'>\r\n                <Icon path={mdiRefresh} size='1.75rem' />\r\n              </div>\r\n            </Button>\r\n          </OverlayTrigger>\r\n        </h5>\r\n      </header>\r\n      <div className='playCoAsideSectionHeaderButtonContainer'>\r\n        <PHButton\r\n          smaller\r\n          variant='outline-secondary'\r\n          style={{\r\n            color: 'var(--color)',\r\n            border: '1px solid var(--color)',\r\n          }}\r\n          disabled={props.isPlaylistFetchingState}\r\n          onClick={showPlaylistCreateModalFunc} >\r\n          <Icon path={mdiPlus} size='1.1rem' />\r\n          &nbsp;&nbsp;새 재생목록 만들기\r\n        </PHButton>\r\n        <PlaylistControlModal\r\n          createMode\r\n          modalShowState={props.playlistCreateModalShowState}\r\n          setModalShowState={props.setPlaylistCreateModalShowState} />\r\n      </div>\r\n      {\r\n        (props.playlistList && props.playlistList.length != 0)\r\n          ? props.playlistList.map((value, index, array) => <div key={`playco-playlist-main-listitem-${value.uuid}`}>\r\n            <ListRow\r\n              className='playCoListItem'\r\n              style={{\r\n                marginLeft: '1rem',\r\n                marginRight: '1rem',\r\n                border: 'none',\r\n                borderRadius: 'none',\r\n                ...((value.blocked_at) ? {\r\n                  textDecoration: 'line-through red',\r\n                  textDecorationThickness: '0.3rem',\r\n                } : {})\r\n              }}\r\n              itemWidth={[90, 10]}\r\n              onClick={() => enterPlaylist(value.uuid)}>\r\n              <div className='playCoListItemTextContainer'>\r\n                <h6 className='playCoListTitleContainer'>{value.name}</h6>\r\n                <div className='playCoListAdditionalInfoContainer'>\r\n                  <div>{\r\n                    (value.blocked_at)\r\n                      ? value.why_blocked\r\n                      : (value.item_count)\r\n                        ? `${value.item_count}개`\r\n                        : '비어있는 재생목록'\r\n                  }</div>\r\n                  <div>{\r\n                    (value.participant_count)\r\n                      ? `적어도 ${value.participant_count}명이 듣는 중이에요!` : ''\r\n                  }</div>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <Button\r\n                  variant='link'\r\n                  style={{ color: 'var(--color)' }}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    props.deletePlaylistFunc(value.uuid);\r\n                  }} >\r\n                  <Icon path={mdiDeleteCircle} size='1.75rem' />\r\n                </Button>\r\n              </div>\r\n            </ListRow>\r\n            {(index === (array.length - 1)) ? <></> : <Divider />}\r\n          </div>)\r\n          : (props.isPlaylistFetchingState)\r\n            ? <>재생목록을 불러오는 중이에요,<br />잠시만 기다려주세요...</>\r\n            : <>\r\n              만드신 재생목록이 없어요,<br />\r\n              &quot;새 재생목록 만들기&quot; 버튼을 눌러주세요!\r\n            </>\r\n      }\r\n    </div>\r\n  </aside>;\r\n};\r\n\r\nconst PlayCoRequireSignedIn: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  return <aside style={{ width: 'calc(var(--width-card) * 1.25)' }}>\r\n    <header>\r\n      <p>\r\n        PlayCo의 특정 기능은 계정이 필요해요,<br />\r\n        이 기능을 위해 로그인을 해 주세요.\r\n      </p>\r\n    </header>\r\n    <PHButton\r\n      onClick={() => navigate('/account/signin')}\r\n      variant='primary'\r\n      size='medium'>\r\n      로그인\r\n    </PHButton>\r\n    <Divider style={{ margin: 'unset', marginLeft: '0', marginRight: '0', marginTop: '1.25rem', marginBottom: '1.25rem', width: '100%' }} />\r\n    {/* <header>\r\n      <p>\r\n        만약 몇몇 기능이 필요없으시다면...\r\n      </p>\r\n    </header>\r\n    <PHButton\r\n      onClick={() => navigate('/')}  // FIXME: NOT READY YET!!!\r\n      variant='outline-info'\r\n      size='medium'>\r\n      로그인 없이 사용하기\r\n    </PHButton> */}\r\n    <header>\r\n      <p>\r\n        현재 로그인 없이 사용할 수 있도록 준비 중이에요,<br />\r\n        조금만 기다려주세요!\r\n      </p>\r\n    </header>\r\n  </aside>;\r\n}\r\n\r\nexport const PlaycoMain: React.FC = (props) => {\r\n  const accountInfo: AccountInfo = useSelector(state => state.accountReducer);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [playCoMainState, setPlayCoMainState] = useState({\r\n    playlistCreateModalShowState: false,\r\n\r\n    playlists: [],\r\n    playlistFetchFailedReason: '',\r\n    didAccountInfoDispatched: false,\r\n    isSignedIn: accountInfo?.isSignedIn ?? false,\r\n    isAccountFetching: accountInfo?.isFetching ?? false,\r\n    isPlaylistFetching: false,\r\n    socketIoConnectionStatus: '',\r\n  });\r\n  const fetchAndUpdatePlaylistListState = () => {\r\n    if (playCoMainState.isPlaylistFetching) // is currently fetching\r\n      return;\r\n\r\n    setPlayCoMainState((prevState) => ({\r\n      ...prevState,\r\n      isPlaylistFetching: true,\r\n    }));\r\n    PlayCoAPI.getAllPlaylists().then(\r\n      (result) => setPlayCoMainState((prevState) => ({\r\n        ...prevState,\r\n        isPlaylistFetching: false,\r\n        playlists: result,\r\n        playlistFetchFailedReason: '',\r\n      })),\r\n      (reason: FrostError) => setPlayCoMainState((prevState) => ({\r\n        ...prevState,\r\n        isPlaylistFetching: false,\r\n        playlists: [],\r\n        playlistFetchFailedReason: reason.message,\r\n      })),\r\n    );\r\n  }\r\n  const deletePlaylist = (playlistId) => {\r\n    setPlayCoMainState((prevState) => ({\r\n      ...prevState,\r\n      playlists: [],\r\n      isPlaylistFetching: true,\r\n    }));\r\n\r\n    PlayCoAPI.deletePlaylist(playlistId).then(\r\n      (result) => fetchAndUpdatePlaylistListState(),\r\n      (reason: FrostError) => setPlayCoMainState({\r\n        ...playCoMainState,\r\n        playlistFetchFailedReason: reason.message,\r\n      })\r\n    );\r\n  }\r\n  const enterPlaylist = (playlistId) => {\r\n    if (!isNumeric(playlistId))\r\n      return;\r\n\r\n    navigate(`/playco/${playlistId}`);\r\n  }\r\n\r\n  const setPlaylistCreateModalState = (newState) => {\r\n    setPlayCoMainState((prevState) => ({\r\n      ...prevState,\r\n      playlistCreateModalShowState: newState,\r\n    }));\r\n\r\n    if (!newState) {\r\n      // We are closing modal now.\r\n      fetchAndUpdatePlaylistListState();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    dispatch(refreshAccessTokenActionCreatorAsync());\r\n  }, []);\r\n  useEffect(() => {\r\n    setPlayCoMainState((prevState) => ({\r\n      ...prevState,\r\n      isSignedIn: accountInfo?.isSignedIn ?? false,\r\n      isAccountFetching: accountInfo?.isFetching ?? false,\r\n      didAccountInfoDispatched: true,\r\n    }));\r\n    if (playCoMainState.didAccountInfoDispatched && accountInfo && !accountInfo.isFetching && accountInfo.isSignedIn) {\r\n      fetchAndUpdatePlaylistListState();\r\n\r\n      // Initialize SocketIO-client if it's not initialized.\r\n      // const playCoSocketIo = new PlayCoSocketIOHandler();\r\n      // playCoSocketIo.connect();\r\n\r\n      return () => {\r\n        // This will be called when this component unmounts.\r\n        // console.log('UNMOUNTED!!!');\r\n      };\r\n    }\r\n  }, [accountInfo]);\r\n\r\n  const needToShowSpinner = playCoMainState.isAccountFetching;\r\n  const playCoBody = needToShowSpinner\r\n    ? <Spinner animation='border' role='status'>\r\n      <span className='visually-hidden'>불러오는 중이에요...</span>\r\n    </Spinner>\r\n    : !playCoMainState.isSignedIn\r\n      ? <PlayCoRequireSignedIn />\r\n      : <PlayCoPlaylistList\r\n        playlistList={playCoMainState.playlists}\r\n        isPlaylistFetchingState={playCoMainState.isPlaylistFetching}\r\n        playlistCreateModalShowState={playCoMainState.playlistCreateModalShowState}\r\n        socketIoConnectionStatusState={playCoMainState.socketIoConnectionStatus}\r\n        refreshPlaylistFunc={fetchAndUpdatePlaylistListState}\r\n        deletePlaylistFunc={deletePlaylist}\r\n        enterPlaylistFunc={enterPlaylist}\r\n        setPlaylistCreateModalShowState={setPlaylistCreateModalState} />;\r\n\r\n  return <section className='playCoMain'>\r\n    <header>\r\n      <h2>PlayCO<sup className='playCoTitleHeaderSup'>Alpha</sup></h2>\r\n      <p>플레이리스트를, 멀리서, 다 같이</p>\r\n    </header>\r\n    {playCoBody}\r\n  </section>\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
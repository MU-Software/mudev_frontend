{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MUsoftware\\\\Desktop\\\\project\\\\MUsoftware\\\\mudev.cc\\\\src\\\\ui\\\\page\\\\account\\\\modal\\\\passwordChangeModal.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Form, Modal, Button } from \"react-bootstrap\";\nimport { PHFormText } from 'src/ui/common/element/muFormText';\nimport { PHSpinnerButton } from 'src/ui/common/element/muButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst calculateIncludedCharType = str => {\n  const strType = [];\n\n  for (let i = 0; i < str.length; i++) {\n    const currentChar = str.charAt(i);\n\n    if (currentChar >= '0' && currentChar <= '9') {\n      strType.push('n'); // number\n    } else if (currentChar >= 'a' && currentChar <= 'z') {\n      strType.push('l'); // lower\n    } else if (currentChar >= 'A' && currentChar <= 'Z') {\n      strType.push('u'); // upper\n    } else if (currentChar >= ' ' && currentChar <= '~') {\n      strType.push('s'); // special char\n    } else {\n      strType.push('e'); // error or unknown\n    }\n  }\n\n  return new Set(strType);\n};\n\nexport const AccountPasswordChangeModal = props => {\n  _s();\n\n  const InputChecker = {\n    pw: str => {\n      if (!str) {\n        return {\n          success: false,\n          pwNotUsableReason: '사용하실 비밀번호를 입력해주세요,'\n        };\n      } else if (str.length < 8) {\n        return {\n          success: false,\n          pwNotUsableReason: '길이가 너무 짧아요,'\n        };\n      } else if (1024 < str.length) {\n        return {\n          success: false,\n          pwNotUsableReason: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [`비밀번호로 ${str.length}자는 너어어어무 길어요!`, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 61\n            }, this), \"\\uBE44\\uBC00\\uBC88\\uD638\\uB294 1024\\uC790 \\uC774\\uD558\\uB85C \\uD574 \\uC8FC\\uC2DC\\uACE0,\"]\n          }, void 0, true)\n        };\n      }\n\n      const strType = calculateIncludedCharType(str);\n\n      if (strType.has('e')) {\n        return {\n          success: false,\n          pwNotUsableReason: '비밀번호로 사용할 수 없는 글자가 포함되어 있어요,'\n        };\n      } else if (strType.size < 2) {\n        return {\n          success: false,\n          pwNotUsableReason: '비밀번호가 너무 단순해요,'\n        };\n      }\n\n      return {\n        success: true,\n        pwNotUsableReason: null\n      };\n    },\n    pwReType: (pwStr, pwReTypeStr) => {\n      if (!pwReTypeStr) {\n        return {\n          success: false,\n          pwReTypeNotUsableReason: '위에 입력하신 비밀번호를 한번 더 입력해주세요.'\n        };\n      } else if (pwStr === pwReTypeStr) {\n        return {\n          success: true,\n          pwReTypeNotUsableReason: null\n        };\n      }\n\n      return {\n        success: false,\n        pwReTypeNotUsableReason: '위에 입력하신 비밀번호와 일치하지 않아요.'\n      };\n    }\n  };\n  const navigate = useNavigate();\n  const [passwordChangeModalState, setPasswordChangeModalState] = useState({\n    isProcessing: false,\n    currentPasswordTextFieldValue: '',\n    currentPasswordNotUsableReason: '',\n    newPasswordTextFieldValue: '',\n    newPasswordNotUsableReason: '',\n    newPasswordReTypeTextFieldValue: '',\n    newPasswordReTypeNotUsableReason: '',\n    passwordChangeFailedReason: ''\n  });\n\n  const closeModalFunc = () => {\n    if (!passwordChangeModalState.isProcessing) props.setModalShowState(false);\n  };\n\n  const handleInputChange = valueName => e => {\n    const newModalState = { ...passwordChangeModalState,\n      [valueName]: e.target.type === 'checkbox' ? e.target.checked : e.target.value\n    };\n    if (valueName === 'currentPasswordTextFieldValue') newModalState.currentPasswordNotUsableReason = '';else if (valueName === 'newPasswordTextFieldValue') newModalState.newPasswordNotUsableReason = '';else if (valueName === 'newPasswordReTypeTextFieldValue') newModalState.newPasswordReTypeNotUsableReason = '';\n    setPasswordChangeModalState(newModalState);\n  };\n\n  const doSubmittableCheck = () => {\n    if (passwordChangeModalState.currentPasswordTextFieldValue && passwordChangeModalState.newPasswordTextFieldValue && passwordChangeModalState.newPasswordReTypeTextFieldValue && passwordChangeModalState.currentPasswordTextFieldValue !== passwordChangeModalState.newPasswordTextFieldValue && passwordChangeModalState.newPasswordTextFieldValue === passwordChangeModalState.newPasswordReTypeTextFieldValue) return true;\n    return false;\n  };\n\n  const tryAccountPasswordChange = () => {\n    let isRequestable = true;\n    setPasswordChangeModalState(prevState => ({ ...prevState,\n      isProcessing: true\n    }));\n    const newModalState = { ...passwordChangeModalState,\n      isProcessing: true\n    }; // trim all strings in states\n\n    for (const key in newModalState) if (typeof newModalState[key] === 'string') newModalState[key] = newModalState[key].trim();\n\n    if (!newModalState.currentPasswordTextFieldValue) {\n      newModalState.currentPasswordNotUsableReason = '현재 사용 중인 비밀번호를 적어주세요.';\n      newModalState.isProcessing = false;\n      isRequestable = false;\n    }\n\n    if (!newModalState.newPasswordTextFieldValue) {\n      newModalState.newPasswordNotUsableReason = '새 비밀번호를 적어주세요.';\n      newModalState.isProcessing = false;\n      isRequestable = false;\n    } else if (newModalState.newPasswordTextFieldValue === newModalState.currentPasswordTextFieldValue) {\n      newModalState.newPasswordNotUsableReason = '입력하신 새 비밀번호가 현재 사용 중으로 적은 비밀번호와 같아요.';\n      newModalState.isProcessing = false;\n      isRequestable = false;\n    }\n\n    if (!newModalState.newPasswordReTypeTextFieldValue) {\n      newModalState.newPasswordReTypeNotUsableReason = '위에 적으신 새 비밀번호를 다시 한번 적어주세요.';\n      newModalState.isProcessing = false;\n      isRequestable = false;\n    } else if (newModalState.newPasswordTextFieldValue !== newModalState.newPasswordReTypeTextFieldValue) {\n      newModalState.newPasswordReTypeNotUsableReason = '다시 적으신 비밀번호가 새 비밀번호와 일치하지 않아요.';\n      newModalState.isProcessing = false;\n      isRequestable = false;\n    }\n\n    setPasswordChangeModalState(newModalState);\n\n    if (isRequestable) {// DO SERVER THING ON HERE\n    }\n  };\n\n  const resetToOriginal = () => {\n    setPasswordChangeModalState({ ...passwordChangeModalState,\n      currentPasswordTextFieldValue: '',\n      newPasswordTextFieldValue: '',\n      newPasswordReTypeTextFieldValue: '',\n      passwordChangeFailedReason: ''\n    });\n  };\n\n  const isSubmittable = doSubmittableCheck();\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: props.modalShowState,\n    onHide: closeModalFunc,\n    backdrop: \"static\",\n    centered: true,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          style: {\n            margin: 0\n          },\n          children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: evt => evt.preventDefault(),\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\uD604\\uC7AC \\uBE44\\uBC00\\uBC88\\uD638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"password\",\n            autoComplete: \"current-password\",\n            placeholder: \"\\uC5EC\\uAE30\\uC5D0 \\uD604\\uC7AC \\uC0AC\\uC6A9 \\uC911\\uC778 \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC801\\uC5B4\\uC8FC\\uC138\\uC694.\",\n            disabled: passwordChangeModalState.isProcessing,\n            value: passwordChangeModalState.currentPasswordTextFieldValue,\n            onChange: handleInputChange('currentPasswordTextFieldValue')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(PHFormText, {\n            children: passwordChangeModalState.currentPasswordNotUsableReason\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"password\",\n            autoComplete: \"new-password\",\n            placeholder: \"\\uC5EC\\uAE30\\uC5D0 \\uC0C8\\uB85C \\uC0AC\\uC6A9\\uD558\\uC2E4 \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC801\\uC5B4\\uC8FC\\uC138\\uC694.\",\n            disabled: passwordChangeModalState.isProcessing,\n            value: passwordChangeModalState.newPasswordTextFieldValue,\n            onChange: handleInputChange('newPasswordTextFieldValue')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(PHFormText, {\n            children: passwordChangeModalState.newPasswordNotUsableReason\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"password\",\n            autoComplete: \"new-password\",\n            placeholder: \"\\uC5EC\\uAE30\\uC5D0 \\uC704\\uC5D0 \\uC785\\uB825\\uD558\\uC2E0 \\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uB2E4\\uC2DC \\uC801\\uC5B4\\uC8FC\\uC138\\uC694.\",\n            disabled: passwordChangeModalState.isProcessing,\n            value: passwordChangeModalState.newPasswordReTypeTextFieldValue,\n            onChange: handleInputChange('newPasswordReTypeTextFieldValue')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(PHFormText, {\n            children: passwordChangeModalState.newPasswordReTypeNotUsableReason\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(PHFormText, {\n          children: passwordChangeModalState.passwordChangeFailedReason\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: resetToOriginal,\n        disabled: passwordChangeModalState.isProcessing,\n        children: \"\\uB418\\uB3CC\\uB9AC\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: closeModalFunc,\n        disabled: passwordChangeModalState.isProcessing,\n        children: \"\\uCDE8\\uC18C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(PHSpinnerButton, {\n        variant: \"primary\",\n        size: false,\n        style: {\n          margin: undefined\n        },\n        onClick: tryAccountPasswordChange,\n        disabled: !isSubmittable,\n        showSpinner: passwordChangeModalState.isProcessing,\n        children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 12\n  }, this);\n};\n\n_s(AccountPasswordChangeModal, \"odlKuJCGum2KoMJv3ikWZDqMFzI=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AccountPasswordChangeModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountPasswordChangeModal\");","map":{"version":3,"sources":["C:/Users/MUsoftware/Desktop/project/MUsoftware/mudev.cc/src/ui/page/account/modal/passwordChangeModal.tsx"],"names":["React","useState","useNavigate","Form","Modal","Button","PHFormText","PHSpinnerButton","calculateIncludedCharType","str","strType","i","length","currentChar","charAt","push","Set","AccountPasswordChangeModal","props","InputChecker","pw","success","pwNotUsableReason","has","size","pwReType","pwStr","pwReTypeStr","pwReTypeNotUsableReason","navigate","passwordChangeModalState","setPasswordChangeModalState","isProcessing","currentPasswordTextFieldValue","currentPasswordNotUsableReason","newPasswordTextFieldValue","newPasswordNotUsableReason","newPasswordReTypeTextFieldValue","newPasswordReTypeNotUsableReason","passwordChangeFailedReason","closeModalFunc","setModalShowState","handleInputChange","valueName","e","newModalState","target","type","checked","value","doSubmittableCheck","tryAccountPasswordChange","isRequestable","prevState","key","trim","resetToOriginal","isSubmittable","modalShowState","margin","evt","preventDefault","undefined"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Form, Modal, Button } from \"react-bootstrap\";\r\nimport { FrostError } from 'src/common/error';\r\n\r\nimport { PHFormText } from 'src/ui/common/element/muFormText';\r\nimport { PHSpinnerButton } from 'src/ui/common/element/muButton';\r\nimport { AccountInfo } from 'src/redux/modules/account/model';\r\n\r\nconst calculateIncludedCharType = (str: string) => {\r\n    const strType: string[] = [];\r\n\r\n    for (let i = 0; i < str.length; i++) {\r\n        const currentChar = str.charAt(i);\r\n        if (currentChar >= '0' && currentChar <= '9') {\r\n            strType.push('n'); // number\r\n        } else if (currentChar >= 'a' && currentChar <= 'z') {\r\n            strType.push('l'); // lower\r\n        } else if (currentChar >= 'A' && currentChar <= 'Z') {\r\n            strType.push('u'); // upper\r\n        } else if (currentChar >= ' ' && currentChar <= '~') {\r\n            strType.push('s'); // special char\r\n        } else {\r\n            strType.push('e'); // error or unknown\r\n        }\r\n    }\r\n    return new Set(strType);\r\n};\r\n\r\nexport const AccountPasswordChangeModal: React.FC = (props: {\r\n    modalShowState: boolean;\r\n    setModalShowState: (boolean) => void;\r\n}) => {\r\n    const InputChecker = {\r\n        pw: (str: string) => {\r\n            if (!str) {\r\n                return {\r\n                    success: false,\r\n                    pwNotUsableReason: '사용하실 비밀번호를 입력해주세요,',\r\n                };\r\n            } else if (str.length < 8) {\r\n                return {\r\n                    success: false,\r\n                    pwNotUsableReason: '길이가 너무 짧아요,',\r\n                };\r\n            } else if (1024 < str.length) {\r\n                return {\r\n                    success: false,\r\n                    pwNotUsableReason: <>\r\n                        {`비밀번호로 ${str.length}자는 너어어어무 길어요!`}<br />\r\n                        비밀번호는 1024자 이하로 해 주시고,\r\n                    </>\r\n                };\r\n            }\r\n\r\n            const strType = calculateIncludedCharType(str);\r\n            if (strType.has('e')) {\r\n                return {\r\n                    success: false,\r\n                    pwNotUsableReason: '비밀번호로 사용할 수 없는 글자가 포함되어 있어요,',\r\n                };\r\n            } else if (strType.size < 2) {\r\n                return {\r\n                    success: false,\r\n                    pwNotUsableReason: '비밀번호가 너무 단순해요,'\r\n                };\r\n            }\r\n\r\n            return {\r\n                success: true,\r\n                pwNotUsableReason: null,\r\n            };\r\n        },\r\n        pwReType: (pwStr: string, pwReTypeStr: string) => {\r\n            if (!pwReTypeStr) {\r\n                return {\r\n                    success: false,\r\n                    pwReTypeNotUsableReason: '위에 입력하신 비밀번호를 한번 더 입력해주세요.',\r\n                };\r\n            } else if (pwStr === pwReTypeStr) {\r\n                return {\r\n                    success: true,\r\n                    pwReTypeNotUsableReason: null,\r\n                };\r\n            }\r\n\r\n            return {\r\n                success: false,\r\n                pwReTypeNotUsableReason: '위에 입력하신 비밀번호와 일치하지 않아요.',\r\n            };\r\n        },\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n    const navigate = useNavigate();\r\n    const [passwordChangeModalState, setPasswordChangeModalState] = useState({\r\n        isProcessing: false,\r\n\r\n        currentPasswordTextFieldValue: '',\r\n        currentPasswordNotUsableReason: '',\r\n        newPasswordTextFieldValue: '',\r\n        newPasswordNotUsableReason: '',\r\n        newPasswordReTypeTextFieldValue: '',\r\n        newPasswordReTypeNotUsableReason: '',\r\n        passwordChangeFailedReason: '',\r\n    });\r\n\r\n    const closeModalFunc = () => {\r\n        if (!passwordChangeModalState.isProcessing)\r\n            props.setModalShowState(false);\r\n    };\r\n    const handleInputChange = (valueName) => (e) => {\r\n        const newModalState = {\r\n            ...passwordChangeModalState,\r\n            [valueName]: (e.target.type === 'checkbox') ? e.target.checked : e.target.value,\r\n        };\r\n        if (valueName === 'currentPasswordTextFieldValue')\r\n            newModalState.currentPasswordNotUsableReason = '';\r\n        else if (valueName === 'newPasswordTextFieldValue')\r\n            newModalState.newPasswordNotUsableReason = '';\r\n        else if (valueName === 'newPasswordReTypeTextFieldValue')\r\n            newModalState.newPasswordReTypeNotUsableReason = '';\r\n        setPasswordChangeModalState(newModalState);\r\n    };\r\n    const doSubmittableCheck = () => {\r\n        if (passwordChangeModalState.currentPasswordTextFieldValue\r\n            && passwordChangeModalState.newPasswordTextFieldValue\r\n            && passwordChangeModalState.newPasswordReTypeTextFieldValue\r\n            && passwordChangeModalState.currentPasswordTextFieldValue !== passwordChangeModalState.newPasswordTextFieldValue\r\n            && passwordChangeModalState.newPasswordTextFieldValue === passwordChangeModalState.newPasswordReTypeTextFieldValue)\r\n            return true;\r\n        return false;\r\n    }\r\n    const tryAccountPasswordChange = () => {\r\n        let isRequestable = true;\r\n\r\n        setPasswordChangeModalState((prevState) => ({\r\n            ...prevState,\r\n            isProcessing: true,\r\n        }));\r\n\r\n        const newModalState = {\r\n            ...passwordChangeModalState,\r\n            isProcessing: true,\r\n        };\r\n        // trim all strings in states\r\n        for (const key in newModalState)\r\n            if (typeof (newModalState[key]) === 'string')\r\n                newModalState[key] = newModalState[key].trim();\r\n\r\n        if (!newModalState.currentPasswordTextFieldValue) {\r\n            newModalState.currentPasswordNotUsableReason = '현재 사용 중인 비밀번호를 적어주세요.';\r\n            newModalState.isProcessing = false;\r\n            isRequestable = false;\r\n        }\r\n        if (!newModalState.newPasswordTextFieldValue) {\r\n            newModalState.newPasswordNotUsableReason = '새 비밀번호를 적어주세요.';\r\n            newModalState.isProcessing = false;\r\n            isRequestable = false;\r\n        } else if (newModalState.newPasswordTextFieldValue === newModalState.currentPasswordTextFieldValue) {\r\n            newModalState.newPasswordNotUsableReason = '입력하신 새 비밀번호가 현재 사용 중으로 적은 비밀번호와 같아요.';\r\n            newModalState.isProcessing = false;\r\n            isRequestable = false;\r\n        }\r\n        if (!newModalState.newPasswordReTypeTextFieldValue) {\r\n            newModalState.newPasswordReTypeNotUsableReason = '위에 적으신 새 비밀번호를 다시 한번 적어주세요.';\r\n            newModalState.isProcessing = false;\r\n            isRequestable = false;\r\n        } else if (newModalState.newPasswordTextFieldValue !== newModalState.newPasswordReTypeTextFieldValue) {\r\n            newModalState.newPasswordReTypeNotUsableReason = '다시 적으신 비밀번호가 새 비밀번호와 일치하지 않아요.';\r\n            newModalState.isProcessing = false;\r\n            isRequestable = false;\r\n        }\r\n        setPasswordChangeModalState(newModalState);\r\n\r\n        if (isRequestable) {\r\n            // DO SERVER THING ON HERE\r\n        }\r\n    };\r\n    const resetToOriginal = () => {\r\n        setPasswordChangeModalState({\r\n            ...passwordChangeModalState,\r\n\r\n            currentPasswordTextFieldValue: '',\r\n            newPasswordTextFieldValue: '',\r\n            newPasswordReTypeTextFieldValue: '',\r\n            passwordChangeFailedReason: '',\r\n        });\r\n    };\r\n\r\n    const isSubmittable = doSubmittableCheck();\r\n\r\n    return <Modal\r\n        show={props.modalShowState}\r\n        onHide={closeModalFunc}\r\n        backdrop='static'\r\n        centered >\r\n        <Modal.Header closeButton>\r\n            <Modal.Title>\r\n                <h5 style={{ margin: 0, }}>\r\n                    비밀번호 변경\r\n                </h5>\r\n            </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n            <Form onSubmit={evt => evt.preventDefault()}>\r\n                <Form.Group>\r\n                    <Form.Label>현재 비밀번호</Form.Label>\r\n                    <Form.Control\r\n                        type='password'\r\n                        autoComplete='current-password'\r\n                        placeholder='여기에 현재 사용 중인 비밀번호를 적어주세요.'\r\n                        disabled={passwordChangeModalState.isProcessing}\r\n                        value={passwordChangeModalState.currentPasswordTextFieldValue}\r\n                        onChange={handleInputChange('currentPasswordTextFieldValue')} />\r\n                    <PHFormText>{passwordChangeModalState.currentPasswordNotUsableReason}</PHFormText>\r\n                </Form.Group>\r\n\r\n                <Form.Group>\r\n                    <Form.Label>새 비밀번호</Form.Label>\r\n                    <Form.Control\r\n                        type='password'\r\n                        autoComplete='new-password'\r\n                        placeholder='여기에 새로 사용하실 비밀번호를 적어주세요.'\r\n                        disabled={passwordChangeModalState.isProcessing}\r\n                        value={passwordChangeModalState.newPasswordTextFieldValue}\r\n                        onChange={handleInputChange('newPasswordTextFieldValue')} />\r\n                    <PHFormText>{passwordChangeModalState.newPasswordNotUsableReason}</PHFormText>\r\n                </Form.Group>\r\n\r\n                <Form.Group>\r\n                    <Form.Label>새 비밀번호 확인</Form.Label>\r\n                    <Form.Control\r\n                        type='password'\r\n                        autoComplete='new-password'\r\n                        placeholder='여기에 위에 입력하신 새 비밀번호를 다시 적어주세요.'\r\n                        disabled={passwordChangeModalState.isProcessing}\r\n                        value={passwordChangeModalState.newPasswordReTypeTextFieldValue}\r\n                        onChange={handleInputChange('newPasswordReTypeTextFieldValue')} />\r\n                    <PHFormText>{passwordChangeModalState.newPasswordReTypeNotUsableReason}</PHFormText>\r\n                </Form.Group>\r\n                <PHFormText>{passwordChangeModalState.passwordChangeFailedReason}</PHFormText>\r\n            </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n            <Button\r\n                variant='secondary'\r\n                onClick={resetToOriginal}\r\n                disabled={passwordChangeModalState.isProcessing}>\r\n                되돌리기\r\n            </Button>\r\n\r\n            <Button\r\n                variant='secondary'\r\n                onClick={closeModalFunc}\r\n                disabled={passwordChangeModalState.isProcessing}>\r\n                취소\r\n            </Button>\r\n\r\n            <PHSpinnerButton\r\n                variant='primary'\r\n                size={false}\r\n                style={{ margin: undefined }}\r\n                onClick={tryAccountPasswordChange}\r\n                disabled={!isSubmittable}\r\n                showSpinner={passwordChangeModalState.isProcessing}>\r\n                비밀번호 변경\r\n            </PHSpinnerButton>\r\n        </Modal.Footer>\r\n    </Modal>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
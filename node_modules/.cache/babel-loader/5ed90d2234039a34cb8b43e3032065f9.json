{"ast":null,"code":"import { FrostError } from \"src/common/error\";\nimport FrostAPI from \"src/network/api\";\nimport { Playlist } from \"./model\";\nexport class PlayCoAPI {\n  static url(playlistId) {\n    return `/playco/playlists/${playlistId}`;\n  }\n\n  static itemUrl(playlistId, itemIndex) {\n    return `/playco/playlists/${playlistId}/items/${itemIndex}`;\n  }\n\n  getAllPlaylists() {\n    return new FrostAPI().get(PlayCoAPI.url(), true).then(result => {\n      // Possible response\n      // - multiple_resources_found(200)\n      // - resource_not_found(404)\n      if (result.code === 200 && result.subCode === 'resource.multiple_result') {\n        return result.data.playco_playlists.map((v, i, a) => new Playlist(v));\n      } else if (result.code === 404 && result.subCode === 'resource.not_found') {\n        return [];\n      } else {\n        throw new FrostError('알 수 없는 문제가 생겼어요,\\n10분 후에 다시 시도해주세요.', `${result.code} - ${result.subCode} raised on PlayCoAPI.getAllPlaylists`, result.code, False, result);\n      }\n    });\n  } // get playlistHashAsync(playlistId: number) {\n  //     return (new FrostAPI())\n  //         .head\n  // }\n\n\n  getPlaylistInfo(playlistId) {\n    return new FrostAPI().get(PlayCoAPI.url(playlistId), true).then(result => {\n      // Possible response\n      // - resource_found(200)\n      // - resource_forbidden(403)\n      // - resource_not_found(404)\n      if (result.code === 200 && result.subCode === 'resource.result') {\n        return [];\n      } else if (result.code === 403 && result.subCode === 'resource.forbidden') {\n        throw new FrostError('해당 재생목록을 볼 권한이 없어요,\\n권한과 재생목록 ID를 확인 후 다시 접속해주세요.', `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`, result.code, False, result);\n      } else if (result.code === 404 && result.subCode === 'resource.not_found') {\n        throw new FrostError('해당 재생목록을 찾을 수 없어요,\\n재생목록 ID를 다시 확인해주세요.', `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`, result.code, False, result);\n      } else {\n        throw new FrostError('알 수 없는 문제가 생겼어요,\\n10분 후에 다시 시도해주세요.', `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`, result.code, False, result);\n      }\n    });\n  }\n\n  createPlaylist(name, data) {\n    return new FrostAPI().post(PlayCoAPI.url(), data, true);\n  }\n\n  modifyPlaylist(playlistId, data) {\n    return new FrostAPI().patch(PlayCoAPI.url(playlistId), data, true).then(result => {\n      // Possible response\n      // - resource_modified(201)\n      // - resource_forbidden(403)\n      // - resource_not_found(404)\n      if (result.code === 200 && result.subCode === 'resource.result') {\n        return [];\n      } else if (result.code === 403 && result.subCode === 'resource.forbidden') {\n        throw new FrostError('해당 재생목록을 볼 권한이 없어요,\\n권한과 재생목록 ID를 확인 후 다시 접속해주세요.', `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`, result.code, False, result);\n      } else if (result.code === 404 && result.subCode === 'resource.not_found') {\n        throw new FrostError('해당 재생목록을 찾을 수 없어요,\\n재생목록 ID를 다시 확인해주세요.', `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`, result.code, False, result);\n      } else {\n        throw new FrostError('알 수 없는 문제가 생겼어요,\\n10분 후에 다시 시도해주세요.', `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`, result.code, False, result);\n      }\n    });\n  }\n\n  deletePlaylist(playlistId) {\n    return new FrostAPI().delete(PlayCoAPI.url(playlistId), true);\n  }\n\n  getPlaylistItems(playlistId) {\n    return new FrostAPI().get(PlayCoAPI.itemUrl(playlistId), true);\n  }\n\n  insertPlaylistItem(playlistId, itemUrl) {\n    return new FrostAPI().post(PlayCoAPI.itemUrl(playlistId), true);\n  }\n\n  movePlaylistItem(playlistId, itemIndex) {\n    return new FrostAPI().patch(PlayCoAPI.itemUrl(playlistId, itemIndex), true);\n  }\n\n  deletePlaylistItem(playlistId, itemIndex) {\n    return new FrostAPI().delete(PlayCoAPI.itemUrl(playlistId, itemIndex), true);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/MUsoftware/Desktop/project/MUsoftware/mudev.cc/src/ui/page/playco/playco/api.ts"],"names":["FrostError","FrostAPI","Playlist","PlayCoAPI","url","playlistId","itemUrl","itemIndex","getAllPlaylists","get","then","result","code","subCode","data","playco_playlists","map","v","i","a","False","getPlaylistInfo","createPlaylist","name","post","modifyPlaylist","patch","deletePlaylist","delete","getPlaylistItems","insertPlaylistItem","movePlaylistItem","deletePlaylistItem"],"mappings":"AAAA,SAASA,UAAT,QAA2B,kBAA3B;AACA,OAAOC,QAAP,MAAqB,iBAArB;AAEA,SAGIC,QAHJ,QAKO,SALP;AAOA,OAAO,MAAMC,SAAN,CAAgB;AACT,SAAHC,GAAG,CAACC,UAAD,EAAsB;AAAE,WAAQ,qBAAoBA,UAAW,EAAvC;AAA2C;;AAC/D,SAAPC,OAAO,CAACD,UAAD,EAAqBE,SAArB,EAAyC;AAAE,WAAQ,qBAAoBF,UAAW,UAASE,SAAU,EAA1D;AAA8D;;AAEvHC,EAAAA,eAAe,GAAG;AACd,WAAQ,IAAIP,QAAJ,EAAD,CACFQ,GADE,CACEN,SAAS,CAACC,GAAV,EADF,EACmB,IADnB,EAEFM,IAFE,CAEIC,MAAD,IAAY;AACd;AACA;AACA;AACA,UAAIA,MAAM,CAACC,IAAP,KAAgB,GAAhB,IAAuBD,MAAM,CAACE,OAAP,KAAmB,0BAA9C,EAA0E;AACtE,eAAOF,MAAM,CAACG,IAAP,CAAYC,gBAAZ,CAA6BC,GAA7B,CAAiC,CAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP,KAAa,IAAIjB,QAAJ,CAAae,CAAb,CAA9C,CAAP;AACH,OAFD,MAEO,IAAIN,MAAM,CAACC,IAAP,KAAgB,GAAhB,IAAuBD,MAAM,CAACE,OAAP,KAAmB,oBAA9C,EAAoE;AACvE,eAAO,EAAP;AACH,OAFM,MAEA;AACH,cAAM,IAAIb,UAAJ,CACF,qCADE,EAED,GAAEW,MAAM,CAACC,IAAK,MAAKD,MAAM,CAACE,OAAQ,sCAFjC,EAGFF,MAAM,CAACC,IAHL,EAGWQ,KAHX,EAGkBT,MAHlB,CAAN;AAIH;AACJ,KAhBE,CAAP;AAiBH,GAtBkB,CAwBnB;AACA;AACA;AACA;;;AAEAU,EAAAA,eAAe,CAAChB,UAAD,EAAqB;AAChC,WAAQ,IAAIJ,QAAJ,EAAD,CACFQ,GADE,CACEN,SAAS,CAACC,GAAV,CAAcC,UAAd,CADF,EAC6B,IAD7B,EAEFK,IAFE,CAEIC,MAAD,IAAY;AACd;AACA;AACA;AACA;AACA,UAAIA,MAAM,CAACC,IAAP,KAAgB,GAAhB,IAAuBD,MAAM,CAACE,OAAP,KAAmB,iBAA9C,EAAiE;AAC7D,eAAO,EAAP;AACH,OAFD,MAEO,IAAIF,MAAM,CAACC,IAAP,KAAgB,GAAhB,IAAuBD,MAAM,CAACE,OAAP,KAAmB,oBAA9C,EAAoE;AACvE,cAAM,IAAIb,UAAJ,CACF,mDADE,EAED,GAAEW,MAAM,CAACC,IAAK,MAAKD,MAAM,CAACE,OAAQ,sCAFjC,EAGFF,MAAM,CAACC,IAHL,EAGWQ,KAHX,EAGkBT,MAHlB,CAAN;AAIH,OALM,MAKA,IAAIA,MAAM,CAACC,IAAP,KAAgB,GAAhB,IAAuBD,MAAM,CAACE,OAAP,KAAmB,oBAA9C,EAAoE;AACvE,cAAM,IAAIb,UAAJ,CACF,yCADE,EAED,GAAEW,MAAM,CAACC,IAAK,MAAKD,MAAM,CAACE,OAAQ,sCAFjC,EAGFF,MAAM,CAACC,IAHL,EAGWQ,KAHX,EAGkBT,MAHlB,CAAN;AAIH,OALM,MAKA;AACH,cAAM,IAAIX,UAAJ,CACF,qCADE,EAED,GAAEW,MAAM,CAACC,IAAK,MAAKD,MAAM,CAACE,OAAQ,sCAFjC,EAGFF,MAAM,CAACC,IAHL,EAGWQ,KAHX,EAGkBT,MAHlB,CAAN;AAIH;AACJ,KAzBE,CAAP;AA0BH;;AAEDW,EAAAA,cAAc,CAACC,IAAD,EAAeT,IAAf,EAAqC;AAC/C,WAAQ,IAAIb,QAAJ,EAAD,CACFuB,IADE,CACGrB,SAAS,CAACC,GAAV,EADH,EACoBU,IADpB,EAC0B,IAD1B,CAAP;AAEH;;AAEDW,EAAAA,cAAc,CAACpB,UAAD,EAAqBS,IAArB,EAA2C;AACrD,WAAQ,IAAIb,QAAJ,EAAD,CACFyB,KADE,CACIvB,SAAS,CAACC,GAAV,CAAcC,UAAd,CADJ,EAC+BS,IAD/B,EACqC,IADrC,EAEFJ,IAFE,CAEIC,MAAD,IAAY;AACd;AACA;AACA;AACA;AACA,UAAIA,MAAM,CAACC,IAAP,KAAgB,GAAhB,IAAuBD,MAAM,CAACE,OAAP,KAAmB,iBAA9C,EAAiE;AAC7D,eAAO,EAAP;AACH,OAFD,MAEO,IAAIF,MAAM,CAACC,IAAP,KAAgB,GAAhB,IAAuBD,MAAM,CAACE,OAAP,KAAmB,oBAA9C,EAAoE;AACvE,cAAM,IAAIb,UAAJ,CACF,mDADE,EAED,GAAEW,MAAM,CAACC,IAAK,MAAKD,MAAM,CAACE,OAAQ,sCAFjC,EAGFF,MAAM,CAACC,IAHL,EAGWQ,KAHX,EAGkBT,MAHlB,CAAN;AAIH,OALM,MAKA,IAAIA,MAAM,CAACC,IAAP,KAAgB,GAAhB,IAAuBD,MAAM,CAACE,OAAP,KAAmB,oBAA9C,EAAoE;AACvE,cAAM,IAAIb,UAAJ,CACF,yCADE,EAED,GAAEW,MAAM,CAACC,IAAK,MAAKD,MAAM,CAACE,OAAQ,sCAFjC,EAGFF,MAAM,CAACC,IAHL,EAGWQ,KAHX,EAGkBT,MAHlB,CAAN;AAIH,OALM,MAKA;AACH,cAAM,IAAIX,UAAJ,CACF,qCADE,EAED,GAAEW,MAAM,CAACC,IAAK,MAAKD,MAAM,CAACE,OAAQ,sCAFjC,EAGFF,MAAM,CAACC,IAHL,EAGWQ,KAHX,EAGkBT,MAHlB,CAAN;AAIH;AACJ,KAzBE,CAAP;AA0BH;;AAEDgB,EAAAA,cAAc,CAACtB,UAAD,EAAqB;AAC/B,WAAQ,IAAIJ,QAAJ,EAAD,CACF2B,MADE,CACKzB,SAAS,CAACC,GAAV,CAAcC,UAAd,CADL,EACgC,IADhC,CAAP;AAEH;;AAEDwB,EAAAA,gBAAgB,CAACxB,UAAD,EAAqB;AACjC,WAAQ,IAAIJ,QAAJ,EAAD,CACFQ,GADE,CACEN,SAAS,CAACG,OAAV,CAAkBD,UAAlB,CADF,EACiC,IADjC,CAAP;AAEH;;AAEDyB,EAAAA,kBAAkB,CAACzB,UAAD,EAAqBC,OAArB,EAAsC;AACpD,WAAQ,IAAIL,QAAJ,EAAD,CACFuB,IADE,CACGrB,SAAS,CAACG,OAAV,CAAkBD,UAAlB,CADH,EACkC,IADlC,CAAP;AAEH;;AAED0B,EAAAA,gBAAgB,CAAC1B,UAAD,EAAqBE,SAArB,EAAwC;AACpD,WAAQ,IAAIN,QAAJ,EAAD,CACFyB,KADE,CACIvB,SAAS,CAACG,OAAV,CAAkBD,UAAlB,EAA8BE,SAA9B,CADJ,EAC8C,IAD9C,CAAP;AAEH;;AAEDyB,EAAAA,kBAAkB,CAAC3B,UAAD,EAAqBE,SAArB,EAAwC;AACtD,WAAQ,IAAIN,QAAJ,EAAD,CACF2B,MADE,CACKzB,SAAS,CAACG,OAAV,CAAkBD,UAAlB,EAA8BE,SAA9B,CADL,EAC+C,IAD/C,CAAP;AAGH;;AApHkB","sourcesContent":["import { FrostError } from \"src/common/error\";\r\nimport FrostAPI from \"src/network/api\";\r\n\r\nimport {\r\n    PlaylistListener,\r\n    PlaylistItem,\r\n    Playlist,\r\n    PlaylistConfig,\r\n} from \"./model\";\r\n\r\nexport class PlayCoAPI {\r\n    static url(playlistId?: number) { return `/playco/playlists/${playlistId}`; }\r\n    static itemUrl(playlistId: number, itemIndex?: number) { return `/playco/playlists/${playlistId}/items/${itemIndex}`; }\r\n\r\n    getAllPlaylists() {\r\n        return (new FrostAPI())\r\n            .get(PlayCoAPI.url(), true)\r\n            .then((result) => {\r\n                // Possible response\r\n                // - multiple_resources_found(200)\r\n                // - resource_not_found(404)\r\n                if (result.code === 200 && result.subCode === 'resource.multiple_result') {\r\n                    return result.data.playco_playlists.map((v, i, a) => new Playlist(v));\r\n                } else if (result.code === 404 && result.subCode === 'resource.not_found') {\r\n                    return [];\r\n                } else {\r\n                    throw new FrostError(\r\n                        '알 수 없는 문제가 생겼어요,\\n10분 후에 다시 시도해주세요.',\r\n                        `${result.code} - ${result.subCode} raised on PlayCoAPI.getAllPlaylists`,\r\n                        result.code, False, result);\r\n                }\r\n            });\r\n    }\r\n\r\n    // get playlistHashAsync(playlistId: number) {\r\n    //     return (new FrostAPI())\r\n    //         .head\r\n    // }\r\n\r\n    getPlaylistInfo(playlistId: number) {\r\n        return (new FrostAPI())\r\n            .get(PlayCoAPI.url(playlistId), true)\r\n            .then((result) => {\r\n                // Possible response\r\n                // - resource_found(200)\r\n                // - resource_forbidden(403)\r\n                // - resource_not_found(404)\r\n                if (result.code === 200 && result.subCode === 'resource.result') {\r\n                    return [];\r\n                } else if (result.code === 403 && result.subCode === 'resource.forbidden') {\r\n                    throw new FrostError(\r\n                        '해당 재생목록을 볼 권한이 없어요,\\n권한과 재생목록 ID를 확인 후 다시 접속해주세요.',\r\n                        `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`,\r\n                        result.code, False, result);\r\n                } else if (result.code === 404 && result.subCode === 'resource.not_found') {\r\n                    throw new FrostError(\r\n                        '해당 재생목록을 찾을 수 없어요,\\n재생목록 ID를 다시 확인해주세요.',\r\n                        `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`,\r\n                        result.code, False, result);\r\n                } else {\r\n                    throw new FrostError(\r\n                        '알 수 없는 문제가 생겼어요,\\n10분 후에 다시 시도해주세요.',\r\n                        `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`,\r\n                        result.code, False, result);\r\n                }\r\n            });\r\n    }\r\n\r\n    createPlaylist(name: string, data: PlaylistConfig) {\r\n        return (new FrostAPI())\r\n            .post(PlayCoAPI.url(), data, true)\r\n    }\r\n\r\n    modifyPlaylist(playlistId: number, data: PlaylistConfig) {\r\n        return (new FrostAPI())\r\n            .patch(PlayCoAPI.url(playlistId), data, true)\r\n            .then((result) => {\r\n                // Possible response\r\n                // - resource_modified(201)\r\n                // - resource_forbidden(403)\r\n                // - resource_not_found(404)\r\n                if (result.code === 200 && result.subCode === 'resource.result') {\r\n                    return [];\r\n                } else if (result.code === 403 && result.subCode === 'resource.forbidden') {\r\n                    throw new FrostError(\r\n                        '해당 재생목록을 볼 권한이 없어요,\\n권한과 재생목록 ID를 확인 후 다시 접속해주세요.',\r\n                        `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`,\r\n                        result.code, False, result);\r\n                } else if (result.code === 404 && result.subCode === 'resource.not_found') {\r\n                    throw new FrostError(\r\n                        '해당 재생목록을 찾을 수 없어요,\\n재생목록 ID를 다시 확인해주세요.',\r\n                        `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`,\r\n                        result.code, False, result);\r\n                } else {\r\n                    throw new FrostError(\r\n                        '알 수 없는 문제가 생겼어요,\\n10분 후에 다시 시도해주세요.',\r\n                        `${result.code} - ${result.subCode} raised on PlayCoAPI.getPlaylistInfo`,\r\n                        result.code, False, result);\r\n                }\r\n            })\r\n    }\r\n\r\n    deletePlaylist(playlistId: number) {\r\n        return (new FrostAPI())\r\n            .delete(PlayCoAPI.url(playlistId), true)\r\n    }\r\n\r\n    getPlaylistItems(playlistId: number) {\r\n        return (new FrostAPI())\r\n            .get(PlayCoAPI.itemUrl(playlistId), true)\r\n    }\r\n\r\n    insertPlaylistItem(playlistId: number, itemUrl: string) {\r\n        return (new FrostAPI())\r\n            .post(PlayCoAPI.itemUrl(playlistId), true)\r\n    }\r\n\r\n    movePlaylistItem(playlistId: number, itemIndex: number) {\r\n        return (new FrostAPI())\r\n            .patch(PlayCoAPI.itemUrl(playlistId, itemIndex), true)\r\n    }\r\n\r\n    deletePlaylistItem(playlistId: number, itemIndex: number) {\r\n        return (new FrostAPI())\r\n            .delete(PlayCoAPI.itemUrl(playlistId, itemIndex), true)\r\n\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}